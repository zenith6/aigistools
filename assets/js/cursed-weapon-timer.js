webpackJsonp([9],{345:function(a,e,t){"use strict";function n(a){return a&&a.__esModule?a:{default:a}}Object.defineProperty(e,"__esModule",{value:!0});var i=t(621),o=n(i),r=t(620),s=n(r);e.default={ja:o.default,"en-US":s.default}},374:function(a,e){a.exports=[{id:"20161208",periods:[["2016/12/08 15:00:00","2016/12/15 10:00:00"],["2016/12/15 15:00:00","2016/12/22 10:00:00"]],objectives:[{value:10,title:"エイミーが仲間になる",icon:"amy"},{value:30,title:"スキルレベル2",icon:"cursed-weapon-1"},{value:50,title:"初期レベル10",icon:"cursed-weapon-1"},{value:100,title:"スキルレベル3",icon:"cursed-weapon-1"},{value:150,title:"出撃コスト-1",icon:"cursed-weapon-1"},{value:200,title:"スキルレベル4",icon:"cursed-weapon-1"},{value:250,title:"出撃コスト-2",icon:"cursed-weapon-1"},{value:300,title:"スキルレベル5",icon:"cursed-weapon-1"},{value:350,title:"初期レベル20",icon:"cursed-weapon-1"},{value:400,title:"スキルレベル6",icon:"cursed-weapon-1"},{value:500,title:"出撃コスト-3",icon:"cursed-weapon-1"},{value:600,title:"スキルレベル7",icon:"cursed-weapon-1"},{value:675,title:"絆のニナ",icon:"bonds-nina"},{value:700,title:"初期レベル30",icon:"cursed-weapon-1"},{value:800,title:"スキルレベル8",icon:"cursed-weapon-1"},{value:855,title:"絆のセリア",icon:"bonds-celia"},{value:900,title:"出撃コスト-4",icon:"cursed-weapon-1"},{value:1e3,title:"初期レベル40",icon:"cursed-weapon-1"},{value:1100,title:"スキルレベル9",icon:"cursed-weapon-1"},{value:1125,title:"絆のフローリカ",icon:"bonds-frorica"},{value:1200,title:"出撃コスト-5",icon:"cursed-weapon-1"},{value:1300,title:"スキルレベル10",icon:"cursed-weapon-1"},{value:1350,title:"技強化の聖霊",icon:"rainbow-sprit"},{value:1400,title:"初期レベル50",icon:"cursed-weapon-1"},{value:1530,title:"プラチナアーマー",icon:"platinum-bucket"},{value:1575,title:"結晶のカケラ",icon:"crystal-fragment"},{value:1665,title:"ゴールドアーマー",icon:"gold-bucket"},{value:1710,title:"黒の聖霊",icon:"black-sprit"},{value:1755,title:"プラチナアーマー",icon:"platinum-bucket"},{value:1800,title:"技強化の聖霊",icon:"rainbow-sprit"}],prizes:[],maps:[{name:"呪われし武器",charisma:20,stamina:1,expectation:2,drops:[{name:"呪いの武器",icon:"cursed-weapon-1",set:2},{name:"花束",icon:"flower"}],experience:140,gold:900},{name:"ゴブリンの強襲",charisma:30,stamina:2,expectation:3,drops:[{name:"呪いの武器",icon:"cursed-weapon-1",set:3},{name:"ヴァレリー",icon:"valerie"},{name:"魔水晶",icon:"demon-crystal-1"}],experience:180,gold:1200},{name:"呪いの投槍",charisma:40,stamina:4,expectation:6,drops:[{name:"呪いの武器3",icon:"cursed-weapon-3",set:1},{name:"呪いの武器5",icon:"cursed-weapon-1",set:3},{name:"カリオペ",icon:"calliope"},{name:"フィリス",icon:"philis"}],experience:240,gold:1800},{name:"呪いの弾丸",charisma:50,stamina:7,expectation:16,drops:[{name:"呪いの武器5",icon:"cursed-weapon-5",set:2},{name:"呪いの武器3",icon:"cursed-weapon-3",set:2},{name:"ジョバンニ",icon:"giovanni"},{name:"白銀の聖霊",icon:"platinum-sprit"}],experience:300,gold:2100},{name:"呪いの大剣",charisma:80,stamina:9,expectation:15,drops:[{name:"呪いの武器5",icon:"cursed-weapon-5",set:3},{name:"ソーマ",icon:"soma"},{name:"プラチナアーマー",icon:"platinum-bucket"},{name:"魔水晶2",icon:"demon-crystal-2"}],experience:370,gold:2700},{name:"呪いの太刀",charisma:40,stamina:5,expectation:9,drops:[{name:"呪いの武器3",icon:"cursed-weapon-3",set:3},{name:"サノスケ",icon:"sanosuke"},{name:"グラディス",icon:"gladys"},{name:"白バケツ",icon:"platinum-bucket"}],experience:260,gold:1950},{name:"呪いの暗器",charisma:70,stamina:8,expectation:13,drops:[{name:"呪いの武器5",icon:"cursed-weapon-5",set:2},{name:"呪いの武器3",icon:"cursed-weapon-3"},{name:"バラッド",icon:"barrad"},{name:"ルビー",icon:"ruby"}],experience:350,gold:2550},{name:"呪いの魔剣",charisma:90,stamina:12,expectation:26,drops:[{name:"呪いの武器5",icon:"cursed-weapon-5",set:4},{name:"呪いの武器3",icon:"cursed-weapon-3",set:2},{name:"技強化の聖霊",icon:"rainbow-sprit"}],experience:400,gold:3e3},{name:"クリスマスツリー・カーニバル",charisma:100,stamina:2,expectation:0,drops:[{name:"金聖霊",icon:"gold-sprit"},{name:"白聖霊",icon:"platinum-sprit"},{name:"黒聖霊",icon:"black-sprit"},{name:"虹聖霊",icon:"rainbow-sprit"}],experience:200,gold:1800}],rewards:[{amount:45,unit:"gold-bucket"},{amount:90,unit:"gold-sprit"},{amount:135,unit:"platinum-bucket"},{amount:180,unit:"gold-sprit"},{amount:225,unit:"crystal-fragment"},{amount:270,unit:"platinum-sprit"},{amount:315,unit:"gold-bucket"},{amount:360,unit:"platinum-sprit"},{amount:405,unit:"platinum-bucket"},{amount:450,unit:"black-sprit"},{amount:495,unit:"crystal-fragment"},{amount:540,unit:"black-sprit"},{amount:585,unit:"gold-bucket"},{amount:630,unit:"rainbow-sprit"},{amount:675,unit:"bonds-nina"},{amount:720,unit:"platinum-sprit"},{amount:765,unit:"crystal-fragment"},{amount:810,unit:"platinum-sprit"},{amount:855,unit:"bonds-celia"},{amount:900,unit:"black-sprit"},{amount:945,unit:"platinum-bucket"},{amount:990,unit:"platinum-sprit"},{amount:1035,unit:"crystal-fragment"},{amount:1080,unit:"platinum-sprit"},{amount:1125,unit:"bonds-frorica"},{amount:1170,unit:"black-sprit"},{amount:1215,unit:"platinum-bucket"},{amount:1260,unit:"black-sprit"},{amount:1305,unit:"crystal-fragment"},{amount:1350,unit:"rainbow-sprit"},{amount:1395,unit:""},{amount:1440,unit:"platinum-sprit"},{amount:1485,unit:"platinum-bucket"},{amount:1530,unit:"platinum-sprit"},{amount:1575,unit:"crystal-fragment"},{amount:1620,unit:"black-sprit"},{amount:1665,unit:"gold-bucket"},{amount:1710,unit:"black-sprit"},{amount:1755,unit:"platinum-bucket"},{amount:1800,unit:"skill-sprit"}]}]},620:function(a,e){a.exports={translation:{"データ{{no}}":"Slot #{{no}}","残り{{lap}}周":"{{lap}} laps remain","{{amount}}個":"{{amount}}","{{percentage}}%経過":"{{percentage}}% elapsed","{{percentage}}%達成":"{{percentage}}% completed","現在の呪いの武器":"Current","目標":"Objective","イベント期間":"Event period","このペースなら最終日までに <strong>{{result}}</strong> 個集まるわ。":"Expected result <strong>{{result}}</strong> at the current pace.","<strong>{{date}}</strong>頃に目標達成できそうよ":"Completion date is <strong>{{date}}</strong>.","周回MAP":"Map","見積り":"Estimate","ランク":"Rank","結晶回復":"Use crystal for","カリスマ＆スタミナ":"Charisma & Stamina","カリスマのみ":"Charisma","スタミナのみ":"Stamina","使用しない":"N/A","自然回復を計算に含める":"Take normal time recovers into calc.","消費結晶":"Required crystals","個":"","カリスマ":"Charisma","スタミナ":"Stamina","到達収集数":"Expected result","対目標数":"Objective","周回数":"Laps","消費カリスマ":"Consumed charisma","対要求":"Requirement","消費スタミナ":"Consumed stamina","獲得EXP":"Got exp","獲得ゴールド":"Got gold","対要求周回":"Requirement","1パリン":"per crystal","アンナさんからのアドバイス":"Advice from Anna","見積りをご利用する際は":"If estimate required crystals, must ","マップの期待値":"fill drop rate","を入力してください":"of maps","わかった":"OK","追加報酬":"Rewards","収集数":"Achived","報酬":"Reward","交換":"Exchange","ノルマ":"Quota","1時間当たり":"Per hour","30分当たり":"Per 30 minutes","1日当たり":"Per day","残り{{days}}日":"Remain {{days}} days","残り{{hours}}時間":"Remain {{hours}} hours","残り{{minutes}}分":"Remain {{minutes}} minutes","ドロップ":"Drop","ドロップ÷周回数で期待値を算出":"Rate = Drop / Laps","期待値を直接入力":"Rate = Input","謎の期待値":"Per lap","カリスマ1当たり":"Per charisma","スタミナ1当たり":"Per stamina","ドロップの合計を現在の収集数へ反映させる":"Reflect total to current items","データの保存先":"Save to","動かなくなったとき":"Trouble shooting","設定とデータを初期化する":"Initialize settings and saved data","カリスタ":"Ch/St","言語":"Language","1周の期待値":"Drop rate","周回":"Lap","周":"","ドロップ合計":"Drop Σ","エイミーが仲間になる":"Available Amy","スキルレベル2":"Skill level 2","初期レベル10":"Initial level 10","スキルレベル3":"Skill level 3","出撃コスト-1":"Cost -1","スキルレベル4":"Skill level 4","出撃コスト-2":"Cost -2","スキルレベル5":"Skill level 5","初期レベル20":"Initial level 20","スキルレベル6":"Skill level 6","出撃コスト-3":"Cost -3","スキルレベル7":"Skill level 7","初期レベル30":"Initial level 30","絆のニナ":"Bond Nina","スキルレベル8":"Skill level 8","出撃コスト-4":"Cost -4","初期レベル40":"Initial level 40","絆のセリア":"Bond Ceria","スキルレベル9":"Skill level 9","出撃コスト-5":"Cost -5","絆のフローリカ":"Bond Florika","スキルレベル10":"Skill level 10","初期レベル50":"Initial level 50","プラチナアーマー":"Platinum armor","結晶のカケラ":"Fragment of crystal","ゴールドアーマー":"Gold armor","黒聖霊":"Spirit of Black","虹聖霊":"Spirit of Rainbow",ja:"Japanese","en-US":"English (Engrish)"}}},621:function(a,e){a.exports={translation:{ja:"日本語","en-US":"英語 (Engrish)"}}},717:function(a,e,t){"use strict";(function(a){function e(a){return a&&a.__esModule?a:{default:a}}function n(e){k.default.init({lng:e,resources:I.default},function(e,t){e&&console.error(e),j=t,E.default.init(k.default,a,{}),a("body").localize()})}function i(a){return 27+(a<=100?3*a:300+a-100)}function o(a){return 12+(a<=100?0:Math.floor((a-100)/20)+1)}function r(a){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(isNaN(a))return"?";if(a===1/0||a===-(1/0))return"∞";var t=a.toFixed(e).split("."),n=parseInt(t[0]);return n.toLocaleString()+(1===t.length?"":"."+t[1])}function s(){if(J&&"direct"!==U){var e=a("#map").find("tbody tr input[name=num_drops]").map(function(){return parseInt(a(this).val())||0}).toArray().reduce(function(a,e){return a+e},0);a("input[name=current]").val(e).trigger("change")}}function c(){var e=void 0;try{e=JSON.parse(a.cookie(P+"_storage"))}catch(a){console.warn(a),e=H}return e}function l(e){a.cookie(P+"_storage",JSON.stringify(e),{expires:30})}function u(e){var t=void 0;try{t=JSON.parse(a.cookie(P+e.active))}catch(a){console.warn(a),t={}}return a.extend(!0,F,t)}function p(e){a.cookie(P+B.active,JSON.stringify(e),{expires:30})}function m(){if(N){var e=45,t=7,n=parseInt(G.val()),i=a("#rewards tbody");i.find("tr").removeClass("active").each(function(){var i=a(this),o=i.attr("data-amount")-n;if(o<-e)i.hide();else if(o<0)i.css("opacity",.5).show();else if(o<e)i.addClass("active").css("opacity",1).show();else if(o<e*t){var r=1-Math.floor(o/e)*e/(e*(t+1));i.show().css("opacity",r)}else i.hide();var s=0===o?"diff-eq":o>0?"diff-plus":"diff-minus",c=0===o?"":(o>0?"+":"")+o;i.find("span.diff").removeClass("diff-eq diff-plus diff-minus").addClass(s).text(c)})}}function d(){if("exchange"===A){var e=parseInt(G.val());z.forEach(function(t){for(var n=a('[data-prize="'+t.unit+'"]').empty(),i=0;i<e;i+=t.value){var o=a("<i />").addClass("icon icon-"+t.unit),r=25*Math.min(e-i,t.value)/t.value;a('<div class="prize-gage" />').append(o.clone().css({position:"absolute",opacity:.2,boxShadow:"none",paddingRight:25-r})).append(o.clone().css({width:r+"px"})).appendTo(n)}})}}function f(){var e=a("[name=expectation]:input").val(),t=1/0,n=0,i="drop"===e?null:e,o=q.map(function(a){var e=a.expectation/(i&&a[i]||1);return t=0,n=Math.max(n,e),e}),s=i?3:2;q.forEach(function(e,i){var c=a("[data-chart="+i+"]"),l=o[i],u=l/(n-t),p=120*u+240;c.find("span.barchart-label").text(j("{{amount}}個",{amount:r(l,s)})),c.find("span.barchart").css({width:100*u+"%",backgroundColor:"hsla("+p+", 80%, 50%, 0.5)"})})}function v(){var e=parseInt(K.val()),t=parseInt(G.val()),n=Math.max(e-t,0);q.forEach(function(e,t){var i=a("[data-chart="+t+"]"),o=n?Math.ceil(n/e.expectation):0;i.find("span.marathon").text(j("残り{{lap}}周",{lap:r(o)}))}),a("#expectation_drop_total").text(r(t))}function h(){var e=parseInt(G.val()),t=parseInt(K.val()),n=q[parseInt(a("[name=estimate_map]:input").val())],s=Math.max(t-e,0),c=Math.ceil(s/n.expectation);a("#estimate_required_marathon").text(r(c));var l=(new Date).getTime(),u=R.reduce(function(a,e){return a+Math.max(e[1],l)-Math.max(e[0],l)},0),p=0+a("[name=estimate_natural_recovery]:input").prop("checked"),m=Math.floor(u/18e4)*p,d=Math.floor(u/36e5)*p,f=parseInt(a("[name=estimate_rank]").val()),v=i(f),h=o(f),g=Math.ceil(n.charisma*c),b=Math.ceil(n.stamina*c),x=a("[name=estimate_use_crystal]:input").val(),_=0+("both"===x||"charisma"===x),w=0+("both"===x||"stamina"===x),k=_?g:m,y=w?b:d,M=Math.floor(Math.min(k/n.charisma,y/n.stamina));a("#estimate_available_marathon").text(r(M));var C=Math.ceil(Math.max(n.charisma*M-m,0)/v),I=Math.ceil(Math.max(n.stamina*M-d,0)/h),S=C+I;a("#estimate_required_crystal").text(r(S));var E=0===C?"diff-eq":C>0?"diff-plus":"diff-minus";a("#estimate_required_crystal_for_charisma").attr("class",E).text(r(C)),E=0===I?"diff-eq":I>0?"diff-plus":"diff-minus",a("#estimate_required_crystal_for_stamina").attr("class",E).text(r(I));var j=M-c;E=0===j?"diff-eq":j>0?"diff-plus":"diff-minus";var T=(j>=0?"+":"")+r(j);a("#estimate_available_marathon_diff").attr("class",E).text(T);var D=n.charisma*M;a("#estimate_using_charisma").text(r(D)),j=D-g,E=0===j?"diff-eq":j>0?"diff-plus":"diff-minus",T=(j>=0?"+":"")+r(j),a("#estimate_using_charisma_diff").attr("class",E).text(T);var z=Math.ceil(n.stamina*M);a("#estimate_using_stamina").text(r(z)),j=z-b,E=0===j?"diff-eq":j>0?"diff-plus":"diff-minus",T=(j>=0?"+":"")+r(j),a("#estimate_using_stamina_diff").attr("class",E).text(T);var O=e+Math.floor(n.expectation*M);a("#estimate_result_collection").text(r(O)),j=O-t,E=0===j?"diff-eq":j>0?"diff-plus":"diff-minus",T=(j>=0?"+":"")+r(j),a("#estimate_result_collection_diff").attr("class",E).text(T);var A=Math.floor(n.experience*M);T=(A>0?"+":"")+r(A),a("#estimate_experience").text(T);var N=S?A/S:0;T=(N>0?"+":"")+r(N),a("#estimate_avg_experience").text(T);var P=Math.floor(n.gold*M);T=(P>0?"+":"")+r(P),a("#estimate_gold").text(T);var L=S?P/S:0;T=(L>0?"+":"")+r(L),a("#estimate_avg_gold").text(T)}function g(){var e=parseInt(G.val()),t=parseInt(K.val()),n=(new Date).getTime(),i=R.reduce(function(a,e){return a+Math.max(e[1],n)-Math.max(e[0],n)},0),o=Math.max(t-e,0),s=i/864e5,c=o/Math.max(s,1),l=i/36e5,u=o/Math.max(l,1),p=i/18e5,m=o/Math.max(p,1),d=r(c,3).split(".");a("#norma_per_day").find(".norma-amount-actual").text(d[0]).parent().find(".norma-amount-fraction").text("."+d[1]).parent(),d=r(u,3).split("."),a("#norma_per_hour").find(".norma-amount-actual").text(d[0]).parent().find(".norma-amount-fraction").text("."+d[1]).parent(),d=r(m,3).split("."),a("#norma_per_minute").find(".norma-amount-actual").text(d[0]).parent().find(".norma-amount-fraction").text("."+d[1]).parent(),a("#remains_days").text(j("残り{{days}}日",{days:r(s,0)})),a("#remains_hours").text(j("残り{{hours}}時間",{hours:r(l,0)})),a("#remains_minutes").text(j("残り{{minutes}}分",{minutes:r(60*l,0)}));var f=100*Math.min(e,t),v=parseInt(f/t)||0,h=D-i,g=parseInt(100*h/D)||0,b=void 0;b=100===v?"progress-bar-success":v>=g?"progress-bar-success":v>.7*g?"progress-bar-info":v>.4*g?"progress-bar-warning":"progress-bar-danger",a("#objective_progress > .progress-bar").width(v+"%").removeClass("progress-bar-success progress-bar-info progress-bar-danger progress-bar-warning").addClass(b).children("span").text(j("{{percentage}}%達成",{percentage:v})),a("#period_progress > .progress-bar").width(g+"%").children("span").text(j("{{percentage}}%経過",{percentage:g}));var x=e*D/h;a("#prediction_label").empty().append(j("このペースなら最終日までに <strong>{{result}}</strong> 個集まるわ。",{result:r(Math.floor(x))}));var _=Math.min(x/t,1),w=a("#objective_progress").width(),k=w*_-47;a(".pointer").css("left",k+"px");var y=w-k<230?-250:0;if(a(".pointer-label").css("margin-left",y+"px"),e<t&&x>=t){var M=void 0,C=void 0;R.forEach(function(a){M=M||a[0],C=C||a[1]});var I=t/x*D,S=R.reduce(function(a,e){if(a)return a;var t=e[1]-e[0];return t<I?(I-=t,null):new Date(e[0]+I)},null),E=S.getMonth(),T=S.getDate(),z=S.getHours(),q=S.getMinutes(),O=E+1+"/"+T+" "+(z<10?"0"+z:z)+":"+(q<10?"0"+q:q),A=j("<strong>{{date}}</strong>頃に目標達成できそうよ",{date:O});a("#prediction_label").append("<span> </span>").append(a("<span />").html(A))}}function b(){var a="animated bounce",e="",t="Webkit Moz O ms Khtml".split(" "),n="",i=document.createElement("div");if(void 0!==i.style.animationName)return!0;for(var o=0;o<t.length;o++)if(void 0!==i.style[t[o]+"AnimationName"])return n=t[o],a=n+"Animation",e="-"+n.toLowerCase()+"-",!0;return!1}function x(e){var t=T.objectives.find(function(a){return a.value==e.id});return a("<div />").append(a("<i />").addClass("icon icon-"+t.icon)).append(a("<span />").text(" ")).append(a("<span />").text(j(t.title))).append(a("<span />").text(" ")).append(a('<span class="label label-default" />').text(t.value)).each(function(e,n){t.unconfirmed&&a(n).append(a("<span> </span>")).append(a('<span class="label label-danger">未確認</span>'))}).html()}function _(){B=c();var e=u(B);n(e.language),G=a("[name=current]:input");var t=(new Date).getTime(),g=a("#period_dates");if(R.forEach(function(e){var n=e[1]-e[0],i=100*n/D+"%",o=new Date(e[0]),r=new Date(e[1]-1),s=o.getMonth()+1+"/"+o.getDate()+"-"+(r.getMonth()+1)+"/"+r.getDate(),c=t>=e[0]&&t<e[1],l=t>=e[1],u=c?"progress-bar-active":l?"progress-bar-expired":"progress-bar-remain";a('<div class="progress-bar">').width(i).text(s).addClass(u).appendTo(g)}),a('[data-objective-mode="'+A+'"]').show(),a('[data-objective-mode][data-objective-mode!="'+A+'"]').remove(),G.click(function(){this.select()}).TouchSpin({min:0,max:1e4,step:1}),K=a("[name=objective]:input"),"achievement"===A)T.objectives.map(function(e){a("<option />").attr("value",e.value).text(e.title+" ("+e.value+"個)").appendTo(K)}),K.select2({formatSelection:x,formatResult:x});else{a("select[name=objective]").click(function(){this.select()});var _=a("#increse_objective_list");z.forEach(function(e){a('<button class="btn btn-default" name="add"  type="button" />').val(e.value).attr("title",e.name).append(a('<i class="fa fa-arrow-up" />')).append(a("<span />").addClass("icon icon-"+e.unit)).appendTo(_)})}a("button[name=add]").click(function(e){e.preventDefault();var t=parseInt(a(this).val()),n=parseInt(K.val());K.val(n+t).trigger("change")}),a("button[name=reset]").click(function(a){a.preventDefault(),K.val(0).trigger("change")}),a("[name=expectation]:input").change(function(){f(),v()}).val(L);var w=a("#prize_list");z.forEach(function(e){a('<div class="prize-list" />').append(a('<h4 class="prize-list-header" />').text(e.name).append(a('<span class="prize-value" />').text("@"+e.value))).append(a('<div class="prize-list-body" />').attr("data-prize",e.unit)).appendTo(w)});var k=q.reduce(function(a,e){return Math.max(a,e.drops.length)},0);e.maps.forEach(function(a,e){q[e].expectation=a.expectation}),J=e.syncCurrentEnabled;var y=void 0,M=function(){y&&clearTimeout(y),setTimeout(function(){var t=a("#map");q.forEach(function(a,n){var i=t.find("tr[data-map="+n+"]"),o=Math.max(parseInt(i.find("input[name=num_laps]").val())||0,0),s=Math.max(parseInt(i.find("input[name=num_drops]").val())||0,0),c=i.find("input[name=actual_expectation]"),l=Math.max(parseFloat(c.val())||0,0);"aggregate"===U&&(l=s/o||0,c.val(l));var u=Math.floor(l);i.find("button[name=increase]").val(u).text("+"+r(u)),e.maps[n].numLaps=o,e.maps[n].numDrops=s,a.expectation=e.maps[n].expectation=l}),p(e),h(),f(),v()},100)},C=a("#map").on("keyup","input[type=number]",function(){M(),s()}).on("change","input[type=number]",function(){M(),s()}).on("click","input[type=number]",function(){this.select()}).on("click","button[name=increase]",function(e){e.preventDefault();var t=a(this).closest("tr"),n=t.find("input[name=num_laps]"),i=parseInt(n.val())+1;n.val(i);var o=t.find("input[name=num_drops]"),r=parseInt(o.val())+parseInt(this.value);o.val(r),o.trigger("change")}).on("change","input[name=expectation_input_mode]",function(){U=a(this).val(),e.expectationInputMode=U,p(e),C.find("input[name=num_laps], input[name=num_drops]").parent().toggle("aggregate"===U).end().end().find("input[name=actual_expectation]").parent().toggle("direct"===U).end().end().find("input[name=sync]").closest("tfoot").toggle("aggregate"===U),M()}).on("click","input[name=sync]",function(){e.syncCurrentEnabled=J=this.checked,p(e),s()}),S=C.find("tbody");if(q.forEach(function(t,n){var i=e.maps[n],o=a("<td />").attr("data-chart",n).append(a('<span class="barchart" />')).append(a('<span class="barchart-label" />')).append(a('<span class="marathon" />'));a("<tr />").attr("data-map",n).append(a("<th />").text(t.name)).append(a("<td />").text(""+t.charisma+"/"+t.stamina)).append(function(){for(var e=t.drops.map(function(e){var t=e.icon?a("<i />").attr("title",e.name).addClass("icon icon-"+e.icon):a("<span />").text(e.name),n=e.set?a('<span class="badge" />').text("x"+e.set):null;return a("<td />").append(t).append(n)}),n=t.drops.length;n<k;n++)e.push(a("<td />"));return e}).append(function(){var e=a('<span class="input-group input-group-sm" />').append(a('<span class="input-group-addon"></span>').text(j("1周の期待値"))).append(a('<input type="number" name="actual_expectation" min="0" class="form-control" />').val(i.expectation)),t=a('<span class="input-group input-group-sm" />').append(a('<span class="input-group-addon"></span>').text(j("周回"))).append(a('<input type="number" name="num_laps" min="0" class="form-control" />').val(i.numLaps)).append(a('<span class="input-group-addon"></span>').text(j("ドロップ"))).append(a('<input type="number" name="num_drops" min="0" class="form-control" />').val(i.numDrops)).append(a('<span class="input-group-btn"><button name="increase" class="btn btn-default"></button></span>'));return a('<td class="expectation" />').append(t).append(e)}).append(o).prependTo(S)}),a("#map thead th.drops").attr("colspan",k),N){var E=a("#rewards tbody");O.forEach(function(e){var t=a('<span class="icon" />').addClass("icon-"+e.unit);a("<tr />").attr("data-amount",e.amount).append(a('<td class="text-right" />').html('<span class="diff"></span> '+e.amount)).append(a("<td />").html(t)).appendTo(E)})}var F=a("[name=estimate_map]:input").change(function(){h(),e.estimateMap=parseInt(a(this).val()),p(e)});q.forEach(function(e,t){a("<option />").val(t).text(e.name+" ("+e.charisma+"/"+e.stamina+")").prependTo(F)});for(var H=a("[name=estimate_rank]:input").change(function(){h(),e.estimateRank=parseInt(a(this).val()),p(e)}),Q=1;Q<=200;Q++){var W=i(Q),X=o(Q),V=""+Q+" ("+W+"/"+X+")";a("<option />").val(Q).text(V).appendTo(H)}var Y=a("[name=estimate_use_crystal]").change(function(){h(),e.estimateUseCrystal=a(this).val(),p(e)}),Z=a("[name=estimate_natural_recovery]:input").change(function(){h(),e.estimateNaturalRecovery=this.checked,p(e)});a("*[title]").tooltip(),G.val(e.current),"exchange"===A?K.val(e.objective):K.select2("val",e.objective),a("[name=current]:input, [name=objective]:input").change(function(){e[this.name]=a(this).val(),p(e),m(),d(),v(),h()}),F.val(e.estimateMap),H.val(e.estimateRank),Y.val(e.estimateUseCrystal),Z.prop("checked",e.estimateNaturalRecovery),"exchange"===A&&d(),N&&m(),C.find("input[name=sync]").prop("checked",J).end().find('input[name=expectation_input_mode][value="'+e.expectationInputMode+'"]').prop("checked",!0).trigger("change").parent().addClass("active"),a("#initialize-button").on("click",function(){a.removeCookie(P),a.removeCookie(P+"_storage"),window.location.reload()});var $=b(),aa=["webkitAnimationEnd","mozAnimationEnd","MSAnimationEnd","oanimationend","animationend"].join(" ");a("#estimate_tutorial").on("click","a",function(e){a("#map .expectation").each(function(){var e=a(this);$&&e.addClass("animated flash").one(aa,function(){e.removeClass("animated flash")})})}).on("click","button",function(t){e.estimateTutorialHidden=!0,p(e),a(t.delegateTarget).each(function(){var e=a(this);$?e.addClass("animated zoomOutRight").one(aa,function(){e.hide()}):e.hide()})}).toggle(!e.estimateTutorialHidden).each(function(){var e=a(this),t=e.find(".anna");e.on("mouseenter",function(){t.addClass("animated bounce")}).on("mouseleave",function(){t.removeClass("animated bounce")})});var ea=a("[name=slot]").change(function(){B.active=a(this).val(),l(B),window.location.reload()});a.map(B.slots,function(e,t){var n=t===B.active;a("<option />").val(t).text(e+(n?" *":"")).attr("selected",n).appendTo(ea)});var ta=a("[name=lang]:input").change(function(){e.language=a(this).val(),p(e),window.location.reload()});switch(a.each(I.default,function(e){a("<option />").val(e).text(j(e)).appendTo(ta)}),ta.val(e.language),e.version){case 1:var na=a('<div class="row"><div class="col-sm-6"><div class="alert alert-danger alert-love"><a href="#" class="close" data-dismiss="alert" aria-label="close">&times;</a><div class="pull-left down"><i class="anna shake shake-constant"></i></div> <strong>アンナさんからのお詫び</strong><br /><p>12月10日18時以前の目標 <code> 1350</code> の報酬が誤っていました。正しい報酬は <code>技強化の聖霊クリスティア</code> です。</p><p class="text-center clearfix"><button class="btn btn-default btn-sm" data-dismiss="alert"><i class="fa fa-check"> 悲しいポン。つらいポン。</button></p></div></div></div>"').on("click","[data-dismiss]",function(a){e.version++,p(e),$&&(a.preventDefault(),a.stopPropagation(),na.addClass("animated zoomOutRight").one(aa,function(){na.hide()}))}).prependTo(a("#content"))}}t(15);var w=t(16),k=e(w),y=t(374),M=e(y),C=t(345),I=e(C),S=t(17),E=e(S),j=void 0,T=M.default[0],R=T.periods.map(function(a){return a.map(Date.parse)}),D=R.reduce(function(a,e){return a+e[1]-e[0]},0);T.maxObjective=null===T.maxObjective?1/0:T.maxObjective;var z=T.prizes,q=T.maps,O=T.rewards,A="achievement",N=!0,P="cursed-weapon-timer",L="stamina",U="direct",J=!0,B=void 0,F={current:20,objective:1400,estimateMap:4,estimateRank:100,estimateUseCrystal:"both",estimateNaturalRecovery:!0,expectationInputMode:U,syncCurrentEnabled:J,maps:q.map(function(a){return{numLaps:0,numDrops:0,expectation:a.expectation}}),estimateTutorialHidden:!1,version:2,language:window.navigator.language||window.navigator.userLanguage},H={active:"",slots:{"":1,_2:2,_3:3}},G=void 0,K=void 0;a(function(){_(),setInterval(g,1e3)})}).call(e,t(2))}},[717]);