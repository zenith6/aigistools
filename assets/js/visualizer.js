webpackJsonp([16],{0:function(t,e,a){(function(t,e){"use strict";function i(){t("#loading").show();var a=new Database(Aigis.settings.databaseUrl),i=Aigis.tables.length,n=!1,r=function(){return n?void t("#loading").hide():void(--i||e([function(){o()},function(){var e=D(),a=m();p(a,e,function(){t("#loading").hide()},function(e){_(e,"danger"),t("#loading").hide()})}]))};Aigis.tables.forEach(function(t){a.query(t,function(e){Aigis.data[t]=e,r()},function(e){n=!0,_("Unable to load "+t+" data from database. "+e.toString(),"danger"),r()})})}function o(){t.map(Aigis.data.Settings,function(t){Aigis.settings[t.key]=JSON.parse(t.value)}),Aigis.settings.infomation.forEach(function(t){_(t)}),Aigis.settings.debug&&(Aigis.data.DefaultUnit=Aigis.debugUnits);var a=location.hash.substring(1)||"damage";Aigis.state.currentGraph=a;var i=location.search.substring(1);R();var o=j(i);o.length?o.forEach(function(t){B(t)}):Aigis.settings.defaultUnits.forEach(function(t){var e=H(t.unitId);e.level=t.unitLevel||1,e.skillLevel=t.skillLevel||1,e.intimacy=0,B(e)});var n={},r=["","","CC","覚醒"],l=t.map(Aigis.data.Unit,function(t){return{id:t.id,weight:t.weight}});l.sort(function(t,e){return t.weight-e.weight}),l.forEach(function(e){var a,i=Aigis.data.Unit[e.id],o=Aigis.data.Class[i.classId];o.id in n||(a=t("<optgroup />").attr("label",o.name),n[o.id]=a),a=n[o.id];var l=r[i.classChange]+i.name;t("<option />").val(i.id).text(l).appendTo(a)}),l=t.map(Aigis.data.Class,function(t){return{id:t.id,weight:t.weight}}),l.sort(function(t,e){return t.weight-e.weight});var c=t("#unitList select[name=new_unit]");t("<option />").appendTo(c),l.forEach(function(t){var e=n[t.id];e&&e.appendTo(c)}),c.select2({placeholder:"ユニットを選択して下さい",closeOnSelect:!1,formatResult:function(t){if(!t.id)return t.text;var e=Aigis.data.Unit[t.id],a="background-position: -"+e.iconSX+"px -"+e.iconSY+"px;background-image: url("+Aigis.settings.sprite+");",i='<i class="small-icon" style="'+a+'"></i> ',o=1==e.baseHealth||1==e.potentialHealth?' <span class="label label-sm label-warning">ステータス未入力</span>':"";return i+t.text+o}}).change(function(){var e=t(this),a=H(e.val());B(a),e.select2("val",null)}),t("#unitList button[name=clear]").click(function(t){t.preventDefault(),R()}),t("button[name=refresh]").click(function(e){e.preventDefault();var a=t(this);a.attr("disabled",!0),t("#loading").show(),t("#notices").empty();var i=D(),o=m();p(o,i,function(){a.attr("disabled",!1),t("#loading").hide()},function(e){_(e,"danger"),a.attr("disabled",!1),t("#loading").hide()})}),t("input[name=target_defence], input[name=target_resistance], input[name=target_health]").TouchSpin({min:0,max:99999}),t("input[name=starting_time]").TouchSpin({min:0,max:600}),t("input[name=ending_time]").TouchSpin({min:1,max:600}),t("button[name=clearDamagePickup]").click(function(){Aigis.damageChart.setSelection(),v()}),t("button[name=clearRecoveryPickup]").click(function(){Aigis.recoveryChart.setSelection(),E()}),t("button[name=clearScorePickup]").click(function(){Aigis.scoreChart.setSelection(),A()}),t("button[name=clearCostPickup]").click(function(){Aigis.costChart.setSelection(),T()}),t("input[name=rank]").TouchSpin({min:1,max:200});var u=t("select[name=prince_title]");t.map(Aigis.data.PrinceTitle,function(e){t("<option />").val(e.id).text(e.name).appendTo(u)}),u.val(Aigis.settings.defaultPriceTitle),t("#switch a[data-toggle=tab]").on("show.bs.tab",function(t){}).on("shown.bs.tab",function(a){if(Aigis.state.result){var i=t(this).attr("data-graph");Aigis.state.currentGraph=i,e([function(){s()}]);var o="#"+i;history.replaceState&&history.replaceState(null,null,o)}});var h=Aigis.state.currentGraph;t("#switch a[data-toggle=tab][data-graph="+h+"]").tab("show"),t("#downloadDamageChart").click(function(){window.open(Aigis.damageChart.getImageURI(),"_blank")}),t("#downloadRecoveryChart").click(function(){window.open(Aigis.recoveryChart.getImageURI(),"_blank")}),t("#downloadScoreChart").click(function(){window.open(Aigis.scoreChart.getImageURI(),"_blank")}),t("#downloadCostChart").click(function(){window.open(Aigis.costChart.getImageURI(),"_blank")}),t("#url").click(function(t){t.preventDefault(),this.select()}),l=t.map(Aigis.data.Unit,function(t){return{id:t.id,weight:t.weight}}),l.sort(function(t,e){return t.weight-e.weight});var d=t("select[name=template_enemy]");l.forEach(function(e){var a=Aigis.data.Unit[e.id];a.enemy&&t("<option />").val(a.id).text(a.name).appendTo(d)});var f=O(i);x(f),d.select2().change(function(){var e=t(this);C(Aigis.data.Unit[e.val()])}).trigger("change"),t("#unitList tbody").sortable({})}function n(t,e){return e=e||2,t=t==1/0||t==-(1/0)?"∞":(t/1e3).toFixed(e),t+"秒"}function r(t,e){var a=[],i=t.map(function(t,a){var i=new Unit;return i.group=2,i.name="#"+(a+1),i.health=e.targetHealth,i.defence=e.targetDefence,i.resistance=e.targetResistance,i.rarity=Aigis.data.Rarity[2],i.actions.attack=new NullAttack(i),i.actions.heal=new NullHeal(i),i.actions.skill=new NullSkill(i,1),i.ability=new NullAbility(i),t.group=1,t.target=i,i}),o=t.concat(i),n=null,r=t.some(function(t){return n=t,"1"==t.base.id});e.princeOnField&&!r&&(n=l(),o=o.concat(n)),o.forEach(function(t,i){t.actions.attack.callbacks.warmup=function(t){this.execute(t);var e=this.owner.target,i=e.calcDamage(this.owner,e),o=this.name+" ダメージ:"+i;a.push({type:"anotation",time:t,object:this.owner,message:o}),e.damaged(i,this.owner,t)},t.callbacks.damaged=function(t,e,i,o,n){if(a.push({type:"damage",time:t,object:i,damage:e}),this.damage>=this.status.health){a.push({type:"destroy",time:t,object:i});var r="攻撃対象"+this.name+"を撃破 最大HP:"+this.status.health+" 合計ダメージ:"+this.damage;a.push({type:"anotation",time:t,object:i,message:r}),this.damage=0,i.dispatch("destroyed",this,t)}},t.actions.heal.callbacks.warmup=function(e){this.execute(e);var i=t,o=i.calcRecovery(this.owner,i),n=this.name+" 対象:"+i.name+" 回復量:"+o;a.push({type:"anotation",time:e,object:this.owner,message:n}),i.recover(o,t,e)},t.callbacks.recovered=function(t,e,i,o,n){a.push({type:"recovery",time:t,object:this,from:i,recovery:e});var r="HPが回復 "+e;a.push({type:"anotation",time:t,object:this,message:r})},e.useSkill&&(t.actions.skill.callbacks.warmup=function(t){var e=(this.getDuration(),"スキル "+this.name+" を発動 Lv:"+this.level);a.push({type:"anotation",time:t,object:this.owner,message:e}),this.execute(t)}),t.callbacks.effectAdded=function(t,e){var i=e.name+" の効果が発生 "+e.dump();a.push({type:"anotation",time:t,object:this,message:i})},t.callbacks.effectRemoved=function(t,e){var i=e.name+" の効果が終了 "+e.dump();a.push({type:"anotation",time:t,object:this,message:i})},t.ability.callbacks.started=function(t,e){var i="アビリティ "+t.name+" を発動";a.push({type:"anotation",time:e,object:t.owner,message:i})}});var c=new Stage;c.callbacks.costChanged=function(t,e,i,o,n){a.push({type:"cost",time:t,object:i,from:i,cost:e});var r="コスト変動 "+(e<=0?"":"+")+e+" (Σ"+n+") ユニット:"+i.name;a.push({type:"anotation",time:t,object:this,message:r})},c.condition=e,o.forEach(function(t){c.addUnit(t)}),c.start(),c.units.forEach(function(t){t.ability.start(0)}),c.units.forEach(function(t){1==t.group&&c.addCost(-t.cost,t,0)});for(var s=e.startingTime;s<=e.endingTime;s+=e.resolution)c.update(s);return c.stop(),a}function l(){var t=new Unit,e=Aigis.data.Unit[Aigis.settings.princeId];t.base=e,t.rarity=Aigis.data.Rarity[e.rarityId],t["class"]=Aigis.data.Class[e.classId],t.name="ダミー王子",t.actions.attack=new NullAttack(t),t.actions.heal=new NullHeal(t);var a=Aigis.data.Skill[e.skillId],i=JSON.parse(a.parameters),o=new window[a.type](t,1,i);o.name=a.name,o.warmupTime=0,t.actions.skill=o,a=Aigis.data.Ability[e.abilityId];var n=new window[a.type](t);return n.name=a.name,n.parameters=JSON.parse(a.parameters),t.ability=n,t}function e(t,a){setTimeout(function(){var i=t.shift();i.apply(a),t.length&&e(t,a)})}function c(){t("#url").val(P())}function s(){var t=Aigis.state.currentGraph;if(!Aigis.cache.graph[t])switch(Aigis.cache.graph[t]=!0,t){case"damage":h(Aigis.state.result,Aigis.state.attackers,Aigis.state.condition);break;case"recovery":d(Aigis.state.result,Aigis.state.attackers,Aigis.state.condition);break;case"score":f(Aigis.state.result,Aigis.state.attackers,Aigis.state.condition);break;case"log":b(Aigis.state.result,Aigis.state.attackers,Aigis.state.condition);break;case"cost":y(Aigis.state.result,Aigis.state.attackers,Aigis.state.condition)}c()}function p(t,a,i,o){return 0===t.length?void o("比較対象がありません。ユニットを追加して下さい。"):(Aigis.state.attackers=t,Aigis.state.condition=a,Aigis.state.result=null,Aigis.cache.graph={},void e([function(){Aigis.state.result=r(Aigis.state.attackers,Aigis.state.condition)},function(){s()},function(){i()}]))}function u(t){return{line:{"class":google.visualization.LineChart,options:{}},area:{"class":google.visualization.AreaChart,options:{}},stack:{"class":google.visualization.SteppedAreaChart,options:{isStacked:!0}}}[t]}function h(e,a,i){var o=g(e,a,i);if(Aigis.damageChartData=o,Aigis.damageChartUnits=a,0===o.getNumberOfRows())return void _("表示可能なデータがありません。","warning");var r=document.getElementById("damageChart"),l=u(i.chartType),c=new l["class"](r);google.visualization.events.addListener(c,"select",function(){v()}),Aigis.damageChart=c;var s=new google.visualization.DataView(o),p=Array.apply(null,new Array(o.getNumberOfColumns())).map(function(t,e){return e});p[0]={calc:function(t,e){return n(t.getValue(e,0),1)},type:"string"},s.setColumns(p);var h="ダメージ量 攻撃対象 防御力:"+i.targetDefence,d={title:h,hAxis:{title:"経過時間 (秒)",viewWindow:{min:0}},vAxis:{viewWindow:{min:0}},focusTarget:"category",selectionMode:"multiple",width:t("#graph").width(),height:i.height},f=t.extend({},l.options,d);c.draw(s,f),c.setSelection([{row:o.getNumberOfRows()-1,column:null}]),setTimeout(v)}function d(e,a,i){var o=w(e,a,i);if(Aigis.recoveryChartData=o,Aigis.recoveryChartUnits=a,0===o.getNumberOfRows())return void _("表示可能なデータがありません。","warning");var r=document.getElementById("recoveryChart"),l=u(i.chartType),c=new l["class"](r);google.visualization.events.addListener(c,"select",function(){E()}),Aigis.recoveryChart=c;var s=new google.visualization.DataView(o),p=Array.apply(null,new Array(o.getNumberOfColumns())).map(function(t,e){return e});p[0]={calc:function(t,e){return n(t.getValue(e,0),1)},type:"string"},s.setColumns(p);var h="回復量",d={title:h,hAxis:{title:"経過時間 (秒)",viewWindow:{min:0}},vAxis:{viewWindow:{min:0}},focusTarget:"category",selectionMode:"multiple",width:t("#graph").width(),height:i.height},f=t.extend({},l.options,d);c.draw(s,f),c.setSelection([{row:o.getNumberOfRows()-1,column:null}]),setTimeout(E)}function f(e,a,i){var o=k(e,a,i);if(Aigis.scoreChartData=o,Aigis.scoreChartUnits=a,0===o.getNumberOfRows())return void _("表示可能なデータがありません。","warning");var r=document.getElementById("scoreChart"),l=u(i.chartType),c=new l["class"](r);google.visualization.events.addListener(c,"select",function(){A()}),Aigis.scoreChart=c;var s=new google.visualization.DataView(o),p=Array.apply(null,new Array(o.getNumberOfColumns())).map(function(t,e){return e});p[0]={calc:function(t,e){return n(t.getValue(e,0),1)},type:"string"},s.setColumns(p);var h="撃破数 攻撃対象 HP:"+i.targetHealth+" 防御力:"+i.targetDefence,d={title:h,hAxis:{title:"経過時間 (秒)",viewWindow:{min:0}},vAxis:{viewWindow:{min:0}},focusTarget:"category",selectionMode:"multiple",width:t("#graph").width(),height:i.height},f=t.extend({},l.options,d);c.draw(s,f),c.setSelection([{row:o.getNumberOfRows()-1,column:null}]),setTimeout(A)}function y(e,a,i){var o=S(e,a,i);if(Aigis.costChartData=o,Aigis.costChartUnits=a,0===o.getNumberOfRows())return void _("表示可能なデータがありません。","warning");var r=document.getElementById("costChart"),l=u(i.chartType),c=new l["class"](r);google.visualization.events.addListener(c,"select",function(){T()}),Aigis.costChart=c;var s=new google.visualization.DataView(o),p=Array.apply(null,new Array(o.getNumberOfColumns())).map(function(t,e){return e});p[0]={calc:function(t,e){return n(t.getValue(e,0),1)},type:"string"},s.setColumns(p);var h="出撃コスト回復量 攻撃対象 防御力:"+i.targetDefence+" HP:"+i.targetHealth,d=-a.reduce(function(t,e){return Math.max(t,e.cost)},0);d=l.options.isStacked?0:d;var f={title:h,hAxis:{title:"経過時間 (秒)",viewWindow:{min:0}},vAxis:{baseline:d},focusTarget:"category",selectionMode:"multiple",width:t("#graph").width(),height:i.height},y=t.extend({},l.options,f);c.draw(s,y),c.setSelection([{row:o.getNumberOfRows()-1,column:null}]),setTimeout(T)}function m(){var e=[],a=t("#unitList");return a.children("tbody").children("tr[data-id]").each(function(){var a=new Unit(e.length),i=t(this);a.base=Aigis.data.Unit[i.attr("data-unit-id")],a.name=i.find("input[name=name]").val(),a["class"]=Aigis.data.Class[i.find("*[name=class]").val()],a.rarity=Aigis.data.Rarity[i.find("*[name=rarity]").val()],a.level=parseInt(i.find("select[name=level]").val()),a.health=parseInt(i.find("input[name=health]").val()),a.strength=parseInt(i.find("input[name=strength]").val()),a.defence=parseInt(i.find("input[name=defence]").val()),a.attackTimes=a.base.attackTimes;var o=0,n=Math.round(1e3*parseFloat(i.find("input[name=attack-cooldown-time]").val())),r=Aigis.data.Attack[a["class"].attackId],l=new window[r.type](a,o,n);l.name=r.name,a.actions.attack=l,r=Aigis.data.Heal[a["class"].healId];var c=new window[r.type](a,o,n);c.name=r.name,a.actions.heal=c,r=Aigis.data.Skill[i.find("*[name=skill]").val()];var s=parseInt(i.find("*[name=skill_lv]").val()),p=s?window[r.type]||NullSkill:NullSkill,u=JSON.parse(r.parameters),h=new p(a,s,u);h.name=r.name,a.actions.skill=h,r=Aigis.data.Ability[i.find("*[name=ability]").val()],p=window[r.type]||NullAbility;var d=new p(a);d.name=r.name,d.parameters=JSON.parse(r.parameters),a.ability=d,a.attackEnabled=a["class"].attackEnabled,a.healEnabled=a["class"].healEnabled,a.cost=a.base.minCost,e.push(a)}),e}function g(t,e,a){var i=new google.visualization.DataTable;i.addColumn("number","経過時間"),e.forEach(function(t){i.addColumn("number",t.name)}),i.addColumn({type:"string",role:"anotation"}),i.addColumn({type:"string",role:"anotationText"});for(var o=e.map(function(){return 0}),n=0,r=1,l=r+e.length,c=a.startingTime;c<=a.endingTime;c+=100){for(var s=[c].concat(o,"",""),p=t[n];p&&p.time<=c;p=t[n]){switch(p.type){case"anotation":s[l]="!",s[l+1]+=p.message+"\n";break;case"damage":o[p.object.id]+=p.damage,s[r+p.object.id]+=p.damage}n++}i.addRow(s)}return i}function w(t,e,a){var i=new google.visualization.DataTable;i.addColumn("number","経過時間"),e.forEach(function(t){i.addColumn("number",t.name)}),i.addColumn({type:"string",role:"anotation"}),i.addColumn({type:"string",role:"anotationText"});for(var o=e.map(function(){return 0}),n=0,r=1,l=r+e.length,c=a.startingTime;c<=a.endingTime;c+=100){for(var s=[c].concat(o,"",""),p=t[n];p&&p.time<=c;p=t[n]){switch(p.type){case"anotation":s[l]="!",s[l+1]+=p.message+"\n";break;case"recovery":o[p.object.id]+=p.recovery,s[r+p.object.id]+=p.recovery}n++}i.addRow(s)}return i}function k(t,e,a){var i=new google.visualization.DataTable;i.addColumn("number","経過時間"),e.forEach(function(t){i.addColumn("number",t.name)}),i.addColumn({type:"string",role:"anotation"}),i.addColumn({type:"string",role:"anotationText"});for(var o=e.map(function(){return 0}),n=0,r=1,l=r+e.length,c=a.startingTime;c<=a.endingTime;c+=100){for(var s=[c].concat(o,"",""),p=t[n];p&&p.time<=c;p=t[n]){switch(p.type){case"anotation":s[l]="!",s[l+1]+=p.message+"\n";break;case"destroy":o[p.object.id]++,s[r+p.object.id]++}n++}i.addRow(s)}return i}function S(t,e,a){var i=new google.visualization.DataTable;i.addColumn("number","経過時間"),e.forEach(function(t){i.addColumn("number",t.name)}),i.addColumn({type:"string",role:"anotation"}),i.addColumn({type:"string",role:"anotationText"});for(var o=e.map(function(){return 0}),n=0,r=1,l=r+e.length,c=a.startingTime;c<=a.endingTime;c+=100){for(var s=[c].concat(o,"",""),p=t[n];p&&p.time<=c;p=t[n]){switch(p.type){case"anotation":s[l]="!",s[l+1]+=p.message+"\n";break;case"cost":o[p.object.id]+=p.cost,s[r+p.object.id]+=p.cost}n++}i.addRow(s)}return i}function b(e){var a=t("#logGraph .table-log tbody");a.empty(),e.forEach(function(e){switch(e.type){case"anotation":t("<tr />").append(t('<td class="time" />').text(n(e.time))).append(t("<td />").text(e.object.name)).append(t("<td />").text(e.message)).appendTo(a)}})}function v(){for(var e=Aigis.damageChartData,a=Aigis.damageChartUnits,i=t("#damagePickup"),o=[],r=0;r<1+a.length;r++)o[r]=t("<tr />");t("<th />").text("経過時間 / ダメージ").appendTo(o[0]),a.forEach(function(e,a){t("<td />").text(e.name).appendTo(o[1+a])});var l=t("<tbody />"),c=Aigis.damageChart.getSelection(),s=c.map(function(t){return{index:t.row,time:e.getValue(t.row,0)}});s.sort(function(t,e){return t.index-e.index}),s.forEach(function(i){var r=i.index,l=e.getValue(r,0);t("<th />").text(n(l,1)).appendTo(o[0]),a.forEach(function(a,i){t("<td />").text(e.getValue(r,1+i)).appendTo(o[1+i])})}),l=i.children("tbody").empty(),o.forEach(function(t){t.appendTo(l)})}function E(){for(var e=Aigis.recoveryChartData,a=Aigis.recoveryChartUnits,i=t("#recoveryPickup"),o=[],r=0;r<1+a.length;r++)o[r]=t("<tr />");t("<th />").text("経過時間 / 回復量").appendTo(o[0]),a.forEach(function(e,a){t("<td />").text(e.name).appendTo(o[1+a])});var l=t("<tbody />"),c=Aigis.recoveryChart.getSelection(),s=c.map(function(t){return{index:t.row,time:e.getValue(t.row,0)}});s.sort(function(t,e){return t.index-e.index}),s.forEach(function(i){var r=i.index,l=e.getValue(r,0);t("<th />").text(n(l,1)).appendTo(o[0]),a.forEach(function(a,i){t("<td />").text(e.getValue(r,1+i)).appendTo(o[1+i])})}),l=i.children("tbody").empty(),o.forEach(function(t){t.appendTo(l)})}function A(){for(var e=Aigis.scoreChartData,a=Aigis.scoreChartUnits,i=t("#scorePickup"),o=[],r=0;r<1+a.length;r++)o[r]=t("<tr />");t("<th />").text("経過時間 / 撃破数").appendTo(o[0]),a.forEach(function(e,a){t("<td />").text(e.name).appendTo(o[1+a])});var l=t("<tbody />"),c=Aigis.scoreChart.getSelection(),s=c.map(function(t){return{index:t.row,time:e.getValue(t.row,0)}});s.sort(function(t,e){return t.index-e.index}),s.forEach(function(i){var r=i.index,l=e.getValue(r,0);t("<th />").text(n(l,1)).appendTo(o[0]),a.forEach(function(a,i){t("<td />").text(e.getValue(r,1+i)).appendTo(o[1+i])})}),l=i.children("tbody").empty(),o.forEach(function(t){t.appendTo(l)})}function T(){for(var e=Aigis.costChartData,a=Aigis.costChartUnits,i=t("#costPickup"),o=[],r=0;r<1+a.length;r++)o[r]=t("<tr />");t("<th />").text("経過時間 / 回復量").appendTo(o[0]),a.forEach(function(e,a){t("<td />").text(e.name).appendTo(o[1+a])});var l=t("<tbody />"),c=Aigis.costChart.getSelection(),s=c.map(function(t){return{index:t.row,time:e.getValue(t.row,0)}});s.sort(function(t,e){return t.index-e.index}),s.forEach(function(i){var r=i.index,l=e.getValue(r,0);t("<th />").text(n(l,1)).appendTo(o[0]),a.forEach(function(a,i){t("<td />").text(e.getValue(r,1+i)).appendTo(o[1+i])})}),l=i.children("tbody").empty(),o.forEach(function(t){t.appendTo(l)})}function R(){t("#unitList").data("sequence",0).children("tbody").empty()}function B(e){var a=t("#unitList"),i=a.data("sequence"),o=i++,n=e.base;a.data("sequence",i);var r=t("<tr />").attr("data-id",o).attr("data-unit-id",e.id).attr("data-rarity",e.rarity.id),l=t("<input />").attr("type","text").attr("name","name").attr("value",e.name).attr("class","form-control").attr("data-id",o);t('<td class="unit-name" />').append(l).appendTo(r),t('<i class="small-icon" />').css({backgroundImage:"url("+Aigis.settings.sprite+")",backgroundPosition:"-"+n.iconSX+"px -"+n.iconSY+"px"}).wrap('<td class="unit-icon" />').parent().appendTo(r);var c,s,p=t('<td class="unit-info" />').appendTo(r);e.base.editable?(c=t("<select />").attr("name","rarity").attr("class","form-control").attr("data-id",o),t.map(Aigis.data.Rarity,function(e){t("<option />").val(e.id).text(e.name).appendTo(c)}),c.val(e.rarity.id).appendTo(p),s=t("<select />").attr("name","class").attr("class","form-control").attr("data-id",o),t.map(Aigis.data.Class,function(a){t("<option />").val(a.id).text(a.name).appendTo(s),s.val(e["class"].id).appendTo(p)})):(c=t('<input type="hidden" />').attr("name","rarity").attr("data-id",o).val(e.rarity.id).appendTo(p),s=t('<input type="hidden" />').attr("name","class").attr("data-id",o).val(e["class"].id).appendTo(p),t("<span />").addClass("label label-rarity-"+e.rarity.id).text(e.rarity.name).appendTo(p),t("<span />").addClass("label label-class").text(e["class"].name).appendTo(p));for(var u=t("<select />").attr("name","level").attr("class","form-control").attr("data-id",o),h=e.base.minLevel;h<=e.base.maxLevel;h++)t("<option />").val(h).text(h).appendTo(u);u.val(e.level),t('<td class="unit-lv" />').append(u).appendTo(r);var d=t("<select />").attr("name","intimacy").attr("class","form-control").attr("data-id",o);for(h=0;h<=e.base.maxIntimacy;h++)t("<option />").val(h).text(h+"%").appendTo(d);d.val(e.intimacy||0).attr("readonly",0===e.base.maxIntimacy),t('<td class="unit-imtimacy" />').append(d).appendTo(r);var f=t("<input />").attr("type","text").attr("name","strength").attr("value",e.strength).attr("class","form-control").attr("data-id",o);t('<td class="unit-strength" />').append(f).appendTo(r);var y=t("<input />").attr("type","text").attr("name","attack-cooldown-time").attr("value",e.attackCooldownTime/1e3).attr("class","form-control text-sm").attr("data-id",o);t('<td class="unit-attack-cooldown-time" />').append(y).appendTo(r),p=t('<td class="unit-ability" />').appendTo(r);var m,g,w=e.skill;if(e.base.editable)m=t("<select />").attr("name","skill").attr("class","form-control").attr("data-id",o).attr("readonly",!e.base.editable),t.map(Aigis.data.Skill,function(e){t("<option />").val(e.id).text(e.name).appendTo(m)}),m.val(e.skill.id).appendTo(p),g=t("<select />").attr("name","skill_lv").attr("class","form-control").attr("data-id",o).appendTo(p);else{t('<input type="hidden" />').attr("name","skill").attr("data-id",o).val(w.id).appendTo(p),t('<input type="hidden" />').attr("name","skill_lv").attr("data-id",o).val(e.skillLevel).appendTo(p);var k=t('<ul class="dropdown-menu" role="menu"></ul>');for(t('<a href="#" />').attr("data-level",0).text("使用しない").wrap("<li>").parent().appendTo(k),h=w.minLevel;h<=w.maxLevel;h++)t('<a href="#" />').attr("data-level",h).text("Lv"+h).wrap("<li>").parent().appendTo(k);t('<div class="btn-group"><button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown"><span class="skill-label"></span> <span class="skill-level"></span> <span class="caret"></span></button></div>').append(k).on("click","a",function(e){e.preventDefault();var a=parseInt(t(this).attr("data-level"));t("input[name=skill_lv][data-id="+o+"]").val(a);var i=a?"Lv"+a:'<i class="glyphicon glyphicon-remove"></i>';t("tr[data-id="+o+"] .skill-level").html(i)}).appendTo(p).find(".skill-label").text(w.name).parent().find(".skill-level").text("Lv"+e.skillLevel)}p=t('<td class="unit-ability" />').appendTo(r);var S;S=t("<select />").attr("name","ability").attr("class","form-control").attr("data-id",o),t.map(Aigis.data.Ability,function(e){t("<option />").val(e.id).text(e.name).appendTo(S)}),S.val(e.ability.id).appendTo(p).select2();var b=t('<input type="hidden" />').attr("name","health").val(e.health),v=t('<input type="hidden" />').attr("name","defence").val(e.defence),E=t("<button />").attr("name","remove").attr("class","btn btn-warning btn-xs").attr("data-id",o).html('<span class="glyphicon glyphicon-remove"></span> 削除').click(function(e){e.preventDefault(),t(this).closest("tr").remove()});t('<td class="command" />').append(E).append(b).append(v).appendTo(r),r.appendTo(a.children("tbody")),f.TouchSpin({min:0,max:99999}),y.TouchSpin({min:.01,max:60,decimals:2,step:.01}),e.base.editable&&(m.select2().change(function(){var e=Aigis.data.Skill[t(this).val()];g.empty().attr("readonly",e.minLevel==e.maxLevel);for(var a=e.minLevel;a<=e.maxLevel;a++)t("<option />").val(a).text(a).appendTo(g);g.val(e.minLevel)}).trigger("change"),g.val(e.skillLevel||1)),t([u.get(0),d.get(0)]).change(function(){var e=parseInt(u.val())-n.minLevel,a=n.maxLevel-n.minLevel,i=Math.min(parseInt(d.val())||0,100)/100;i=1==i?1.2:i;var o=parseInt(t("input[name=rank]").val()),r=n.id!=Aigis.settings.princeId||o<=100?0:Math.floor((o-100)/25),l=Math.round((n.potentialHealth-n.baseHealth)*e/a),c=Math.round(n.bonusHealth*i),s=100*r,p=n.baseHealth+l+c+s;b.val(p),l=Math.round((n.potentialStrength-n.baseStrength)*e/a),c=Math.round(n.bonusStrength*i),s=10*r;var h=n.baseStrength+l+c+s;f.val(h),l=Math.round((n.potentialDefence-n.baseDefence)*e/a),c=Math.round(n.bonusDefence*i),s=10*r;var y=n.baseDefence+l+c+s;v.val(y)}).trigger("change")}function D(){return{startingTime:1e3*parseInt(t("input[name=starting_time]").val()),endingTime:1e3*parseInt(t("input[name=ending_time]").val()),resolution:1,targetDefence:parseInt(t("input[name=target_defence]").val()),targetHealth:parseInt(t("input[name=target_health]").val()),targetResistance:parseInt(t("input[name=target_resistance]").val()),rank:parseInt(t("input[name=rank]").val()),princeTitle:Aigis.data.PrinceTitle[t("select[name=prince_title]").val()],princeOnField:!!t("input[name=prince_on_field]:checked").val(),useSkill:!!t("input[name=use_skill]:checked").val(),abilityToAll:!!t("input[name=ability_to_all]:checked").val(),chartType:t("select[name=chart_type]").val(),height:parseInt(t("input[name=height]").val())}}function x(e){void 0!==e.startingTime&&t("input[name=starting_time]").val(Math.floor(e.startingTime/1e3)),void 0!==e.endingTime&&t("input[name=ending_time]").val(Math.floor(e.endingTime/1e3)),void 0!==e.resolution&&t("input[name=resolution]").val(Math.floor(e.resolution/1e3)),void 0!==e.target&&t("select[name=template_enemy]").val(e.target),void 0!==e.targetHealth&&t("input[name=target_health]").val(e.targetHealth),void 0!==e.targetDefence&&t("input[name=target_defence]").val(e.targetDefence),void 0!==e.targetResistance&&t("input[name=target_resistance]").val(e.targetResistance),void 0!==e.rank&&t("input[name=rank]").val(e.rank),void 0!==e.princeTitle&&t("select[name=prince_title]").val(e.princeTitle.id),void 0!==e.princeOnField&&t("input[name=prince_on_field]").prop("checked",e.princeOnField),void 0!==e.useSkill&&t("input[name=use_skill]").prop("checked",e.useSkill),void 0!==e.abilityToAll&&t("input[name=ability_to_all]").prop("checked",e.abilityToAll),void 0!==e.chartType&&t("select[name=chart_type]").val(e.chartType),void 0!==e.height&&t("input[name=height]").val(e.height)}function _(e,a){a=a||"info",t('<div class="alert alert-'+a+'" />').text(e).appendTo(t("#notices"))}function C(e){t("input[name=target_defence]").val(e.baseDefence),t("input[name=target_health]").val(e.baseHealth)}function H(t){var e=new Unit,a=Aigis.data.Unit[t];e.id=a.id,e.base=a;var i=["","","CC","覚醒"];return e.name=i[a.classChange]+a.name,e.level=a.maxLevel,e.health=a.baseHealth,e.strength=a.baseStrength,e.defende=a.baseDefence,e.attackTimes=a.attackTimes,e.attackWarmupTime=a.attackWarmupTime,e.attackCooldownTime=a.attackCooldownTime,e.intimacy=a.maxIntimacy,e["class"]=Aigis.data.Class[a.classId],e.skill=Aigis.data.Skill[a.skillId]||NullSkill,e.skillLevel=e.skill.maxLevel,e.rarity=Aigis.data.Rarity[a.rarityId],e.ability=Aigis.data.Ability[a.abilityId]||NullAbility,e.cost=a.minCost||0,e}function M(){var e=[];e.push(["ss",1e3*parseInt(t("input[name=starting_time]").val())]),e.push(["se",1e3*parseInt(t("input[name=ending_time]").val())]),e.push(["sr",1]),e.push(["ti",t("select[name=template_enemy]").val()]),e.push(["td",t("input[name=target_defence]").val()]),e.push(["th",t("input[name=target_health]").val()]),e.push(["tr",t("input[name=target_resistance]").val()]),e.push(["ra",t("input[name=rank]").val()]),e.push(["pt",t("select[name=prince_title]").val()]),e.push(["po",t("input[name=prince_on_field]:checked").val()?1:0]),e.push(["su",t("input[name=use_skill]:checked").val()?1:0]),e.push(["aa",t("input[name=ability_to_all]:checked").val()?1:0]),e.push(["dc",t("select[name=chart_type]").val()]),e.push(["dh",t("input[name=height]").val()]);var a=0;return t("#unitList tr[data-id]").each(function(){var i=(new Unit(a),t(this)),o="u["+a+"]";e.push([o+"[i]",i.attr("data-unit-id")]),e.push([o+"[n]",i.find("input[name=name]").val()]),e.push([o+"[c]",i.find("*[name=class]").val()]),e.push([o+"[r]",i.find("*[name=rarity]").val()]),e.push([o+"[l]",i.find("select[name=level]").val()]),e.push([o+"[m]",i.find("select[name=intimacy]").val()]),e.push([o+"[s]",i.find("input[name=strength]").val()]),e.push([o+"[o]",parseInt(Math.floor(1e3*parseFloat(i.find("input[name=attack-cooldown-time]").val())))]),e.push([o+"[k]",i.find("*[name=skill]").val()]),e.push([o+"[e]",i.find("*[name=skill_lv]").val()]),e.push([o+"[a]",i.find("*[name=ability]").val()]),a++}),e.push(["ul",a]),e.map(function(t){return t[0]+"="+encodeURIComponent(t[1])}).join("&")}function O(t){var e=t.split("&").map(function(t){return t.split("=").map(decodeURIComponent)}).reduce(function(t,e){return t[e[0]]=e[1],t},{});return{startingTime:e.ss?parseInt(e.ss):0,endingTime:e.se?parseInt(e.se):6e4,resolution:0,target:e.ti?parseInt(e.ti):1e3,targetDefence:e.td?parseInt(e.td):void 0,targetHealth:e.th?parseInt(e.th):void 0,targetResistance:e.tr?parseInt(e.tr):void 0,rank:e.ra?parseInt(e.ra):100,princeTitle:e.pt?Aigis.data.PrinceTitle[e.pt]:void 0,princeOnField:!!e.po&&!!parseInt(e.po),useSkill:!e.su||!!parseInt(e.su),abilityToAll:!!e.aa&&!!parseInt(e.aa),chartType:e.dc?e.dc:"area",height:e.dh?parseInt(e.dh):600}}function j(t){for(var e=[],a=t.split("&").map(function(t){return t.split("=").map(decodeURIComponent)}).reduce(function(t,e){return t[e[0]]=e[1],t},{}),i=parseInt(a.ul),o=0;o<i;o++){var n="u["+o+"]",r=a[n+"[i]"],l=H(r),c=a[n+"[n]"];c&&(l.name=c);var s=a[n+"[r]"];s&&(l.rarityId=s,l.rarity=Aigis.data.Rarity[s]);var p=a[n+"[c]"];p&&(l.classId=p,l.klass=Aigis.data.Class[p]);var u=a[n+"[l]"];u&&(l.level=parseInt(u));var h=a[n+"[s]"];h&&(l.strength=parseInt(h));var d=a[n+"[m]"];d&&(l.intimacy=parseFloat(d));var f=a[n+"[o]"];f&&(l.attackCooldownTime=parseInt(f));var y=a[n+"[k]"];y&&(l.skillId=y,l.skill=Aigis.data.Skill[y]);var m=a[n+"[e]"];m&&(l.skillLevel=parseInt(m));var g=a[n+"[a]"];g&&(l.abilityId=g,l.ability=Aigis.data.Ability[g]),e.push(l)}return e}function P(){return location.protocol+"//"+location.host+location.pathname+"?"+M()+location.hash}a(1),a(327),a(342),a(343),a(540),google.load("visualization","1",{packages:["corechart","table"]}),google.setOnLoadCallback(i)}).call(e,a(1),a(295))},540:function(t,e,a){(function(){"use strict";var t=a(541);window.Aigis={settings:{databaseUrl:"https://docs.google.com/spreadsheets/d/1-zStm1B36Ckq1Tpxrz018h3YVAsZyd2vustqghPFie0/edit",debug:!1},tables:["Class","Rarity","Attack","Heal","Skill","Ability","Unit","PrinceTitle","Settings"],data:{},state:{currentGraph:"damage"},cache:{}},window.Stage=function(){this.name="ステージ",this.condition=null,this.units=[],this.time=0,this.status={},this.cost=0,this.callbacks={}},Stage.prototype=Object.create({}),Stage.prototype.constructor=Object,Stage.prototype.dispatch=function(){var t=Array.prototype.slice.call(arguments),e=t.shift(),a=this.callbacks[e];a&&a.apply(this,t)},Stage.prototype.addUnit=function(t){t.stage=this,this.units.push(t)},Stage.prototype.clearStatus=function(){var t=this.status;t.morale=0},Stage.prototype.start=function(){this.clearStatus(),this.units.forEach(function(t){t.reset()})},Stage.prototype.stop=function(){},Stage.prototype.update=function(t){this.clearStatus();for(var e,a=this.units,i=a.length,o=0;o<i;o++)e=a[o],e.ability.update(t),e.actions.skill.update(t);for(o=0;o<i;o++)a[o].updateStatus(t);for(o=0;o<i;o++)e=a[o],e.actions.attack.update(t),e.actions.heal.update(t)},Stage.prototype.addCost=function(t,e,a){var i=this.cost,o=i+t;return this.cost=o,this.dispatch("costChanged",a,t,e,i,o),t},window.Unit=function(t){this.id=t,this.group=0,this.name="",this.level=1,this.health=0,this.strength=0,this.defence=0,this.resistance=0,this.cost=0,this.attackTimes=1,this.attackWarmupDelay=1,this.attackCooldownDelay=1,this.attackAttribution=0,this.healWarmupDelay=1,this.healCooldownDelay=1,this.skillWarmupDelay=1,
this.skillCooldownDelay=1,this.attackEnabled=!0,this.healEnabled=!0,this.skillEnabled=!0,this.ability=null,this.actions={},this.callbacks={},this.effects=null,this.damage=null,this.status={},this.reset(),this.clearStatus()},Unit.prototype=Object.create(Object.prototype),Unit.prototype.constructor=Object,Unit.prototype.dispatch=function(){var t=Array.prototype.slice.call(arguments),e=t.shift(),a=this.callbacks[e];a&&a.apply(this,t)},Unit.prototype.reset=function(){this.damage=0,this.effects=[];for(var t in this.actions){var e=this.actions[t];e.reset()}if(this["class"]&&window[this["class"].effect]){var a=new window[this["class"].effect](this,0,1/0,1);this.addEffect(a,0)}},Unit.prototype.clearStatus=function(){var t=this.status;t.health=this.health,t.strength=this.strength,t.defence=this.defence,t.resistance=this.resistance,t.attackWarmupDelay=this.attackWarmupDelay,t.attackCooldownDelay=this.attackCooldownDelay,t.attackTimes=this.attackTimes,t.healWarmupDelay=this.healWarmupDelay,t.healCooldownDelay=this.healCooldownDelay,t.skillWarmupDelay=this.skillWarmupDelay,t.skillCooldownDelay=this.skillCooldownDelay,t.attackEnabled=this.attackEnabled,t.healEnabled=this.healEnabled,t.skillEnabled=this.skillEnabled,t.attackAttribution=this.attackAttribution},Unit.prototype.updateStatus=function(t){this.clearStatus();for(var e=0;e<this.effects.length;e++){var a=this.effects[e];a.update(t),a.expired&&(this.effects.splice(e--,1),this.dispatch("effectRemoved",t,a))}this.actions.attack.enabled=this.status.attackEnabled,this.actions.heal.enabled=this.status.healEnabled,this.actions.skill.enabled=this.status.skillEnabled},Unit.prototype.updateActions=function(t){for(var e in this.actions){var a=this.actions[e];a.update(t)}},Unit.prototype.damaged=function(t,e,a){var i=this.damage,o=i+t;return this.damage=o,this.dispatch("damaged",a,t,e,i,o),t},Unit.prototype.calcDamage=function(t,e){return Math.floor(t.actions.attack.calcDamage(t,e))},Unit.prototype.recover=function(t,e,a){var i=this.damage,o=Math.max(i-t,0);return this.damage=o,this.dispatch("recovered",a,t,e,i,o),t},Unit.prototype.calcRecovery=function(t,e){return Math.floor(t.actions.heal.calcDamage(t,e))},Unit.prototype.addEffect=function(t,e){this.effects.push(t),this.dispatch("effectAdded",e,t)},window.Action=function(t,e,a){this.name="?",this.owner=t,this.warmupTime=e,this.cooldownTime=a,this.warmupDelay=1,this.cooldownDelay=1,this.state=0,this.baseTime=0,this.callbacks={}},Action.prototype=Object.create(Object.prototype,{executable:{configuable:!1,get:function(){return 1==this.state}}}),Action.prototype.constructor=Object,Action.prototype.reset=function(){this.state=0,this.baseTime=0,this.enabled=!0},Action.prototype.dispatch=function(){var t=Array.prototype.slice.call(arguments),e=t.shift(),a=this.callbacks[e];a&&a.apply(this,t)},Action.prototype.update=function(t){if(this.enabled)for(;;){switch(this.state){case 0:var e=this.getWarmupTime()*this.getWarmupDelay();if(t>=this.baseTime+e){this.state=1,this.baseTime=this.baseTime+this.warmupTime,this.dispatch("warmup",t);continue}break;case 1:break;case 2:this.state=3,this.baseTime=t+this.getDuration(),this.dispatch("execute",t);continue;case 3:var a=this.getCooldownTime()*this.getCooldownDelay();t>=this.baseTime+a&&(this.state=1,this.baseTime=this.baseTime+a,this.dispatch("warmup",t))}break}},Action.prototype.execute=function(t){if(!this.executable)throw new Error("Unable to execute action. current state is "+this.state);this.state=2,this.update(t)},Action.prototype.getDuration=function(){return 0},Action.prototype.getWarmupTime=function(){return this.warmupTime},Action.prototype.getCooldownTime=function(){return this.cooldownTime},Action.prototype.getWarmupDelay=function(){return this.warmupDelay},Action.prototype.getCooldownDelay=function(){return this.cooldownDelay},window.Attack=function(t,e,a){Action.call(this,t,e,a)},Attack.prototype=Object.create(Action.prototype),Attack.prototype.constructor=Action,Attack.prototype.getWarmupDelay=function(){return this.owner.status.attackWarmupDelay},Attack.prototype.getCooldownDelay=function(){return this.owner.status.attackCooldownDelay},Attack.prototype.calcDamage=function(t,e){throw new Error("Not implemented")},window.NullAttack=function(t,e,a){Attack.call(this,t,1/0,1/0)},NullAttack.prototype=Object.create(Attack.prototype),NullAttack.prototype.constructor=Attack,NullAttack.prototype.calcDamage=function(t,e){return 0},window.PhygicalAttack=function(t,e,a){Attack.call(this,t,e,a),this.magical=!1},PhygicalAttack.prototype=Object.create(Attack.prototype),PhygicalAttack.prototype.constructor=Attack,PhygicalAttack.prototype.calcDamage=function(t,e){var a=t.status,i=e.status,o=0===a.attackAttribution?i.defence:0,n=Math.floor(a.strength/10);return Math.max(a.strength-o,n,0)*a.attackTimes},window.MagicalAttack=function(t,e,a){Attack.call(this,t,e,a)},MagicalAttack.prototype=Object.create(Attack.prototype),MagicalAttack.prototype.constructor=Attack,MagicalAttack.prototype.calcDamage=function(t,e){var a=t.status,i=e.status,o=Math.max(Math.floor(a.strength*(1-i.resistance/100)),0);return o*a.attackTimes},window.MagicalSplashAttack=function(t,e,a){Attack.call(this,t,e,a)},MagicalSplashAttack.prototype=Object.create(Attack.prototype),MagicalSplashAttack.prototype.constructor=Attack,MagicalSplashAttack.prototype.calcDamage=function(t,e){var a=t.status,i=e.status;return Math.max(a.strength-i.defence,0)*a.attackTimes},window.Heal=function(t,e,a){Action.call(this,t,e,a)},Heal.prototype=Object.create(Action.prototype),Heal.prototype.constructor=Action,Heal.prototype.getWarmupDelay=function(){return this.owner.status.attackWarmupDelay},Heal.prototype.getCooldownDelay=function(){return this.owner.status.attackCooldownDelay},Heal.prototype.calcRecovery=function(t,e){throw new Error("Not implemented")},window.NullHeal=function(t,e,a){Heal.call(this,t,1/0,1/0)},NullHeal.prototype=Object.create(Heal.prototype),NullHeal.prototype.constructor=Heal,NullHeal.prototype.calcRecovery=function(t,e){return 0},window.MagicalHeal=function(t,e,a){Heal.call(this,t,e,a)},MagicalHeal.prototype=Object.create(Heal.prototype),MagicalHeal.prototype.constructor=Heal,MagicalHeal.prototype.calcDamage=function(t,e){var a=t.status;return a.strength},window.Skill=function(t,e,a){Action.call(this,t,1/0,1/0),this.level=e,this.parameters=a||this.getParamTable(),this.param=this.parameters[this.owner.rarity.id]},Skill.prototype=Object.create(Action.prototype),Skill.prototype.constructor=Action,Skill.prototype.getDuration=function(){return this.param?this.param.durationBase+this.param.durationRate*this.level:1/0},Skill.prototype.getWarmupTime=function(){return this.param?this.param.warmupBase+this.param.warmupRate*this.level:1/0},Skill.prototype.getCooldownTime=function(){return this.param?this.param.cooldownBase+this.param.cooldownRate*this.level:1/0},Skill.prototype.getMultiplier=function(){return this.param?this.param.multiplierBase+this.param.multiplierRate*this.level:1/0},Skill.prototype.getWarmupDelay=function(){return this.owner.status.skillWarmupDelay},Skill.prototype.getCooldownDelay=function(){return this.owner.status.skillCooldownDelay},Skill.prototype.getParamTable=function(){return{}},window.NullSkill=function(t,e){Skill.call(this,t,e),this.warmupTime=1/0,this.cooldownTime=1/0},NullSkill.prototype=Object.create(Skill.prototype),NullSkill.prototype.constructor=Skill,window.RaiseMoraleSkill=function(t,e){Skill.call(this,t,e)},RaiseMoraleSkill.prototype=Object.create(Skill.prototype),RaiseMoraleSkill.prototype.constructor=Skill,RaiseMoraleSkill.prototype.execute=function(t){Skill.prototype.execute.call(this,t);var e=this.getDuration(),a=this.owner.stage,i=a.condition.princeOnField;a.units.forEach(function(o){if(1==o.group&&(i||o.base.id==Aigis.settings.princeId)){var n=a.status.morale,r=new MoraleEffect(o,t,e,n);o.addEffect(r,t)}})},RaiseMoraleSkill.prototype.getParamTable=function(){return{1:{durationBase:1/0,durationRate:1/0,warmupBase:0,warmupRate:0,cooldownBase:1/0,cooldownRate:1/0}}},window.EnforceStrengthSkill=function(t,e,a){Skill.call(this,t,e,a)},EnforceStrengthSkill.prototype=Object.create(Skill.prototype),EnforceStrengthSkill.prototype.constructor=Skill,EnforceStrengthSkill.prototype.execute=function(t){Skill.prototype.execute.call(this,t);var e=this.getDuration(),a=this.getMultiplier(),i=new EnforceStrengthEffect(this.owner,t,e,a);this.owner.addEffect(i,t)},window.DesperationSkill=function(t,e){EnforceStrengthSkill.call(this,t,e)},DesperationSkill.prototype=Object.create(EnforceStrengthSkill.prototype),DesperationSkill.prototype.constructor=EnforceStrengthSkill,window.Desperation1Skill=function(t,e){DesperationSkill.call(this,t,e)},Desperation1Skill.prototype=Object.create(DesperationSkill.prototype),Desperation1Skill.prototype.constructor=DesperationSkill,Desperation1Skill.prototype.getParamTable=function(){return{4:{durationBase:1e4,durationRate:0,warmupBase:45e3,warmupRate:-1e3,cooldownBase:45e3,cooldownRate:-1e3,multiplierBase:1.375,multiplierRate:.125}}},window.Desperation2Skill=function(t,e){DesperationSkill.call(this,t,e)},Desperation2Skill.prototype=Object.create(DesperationSkill.prototype),Desperation2Skill.prototype.constructor=DesperationSkill,Desperation2Skill.prototype.getParamTable=function(){return{5:{durationBase:1e4,durationRate:0,warmupBase:27e3,warmupRate:-1e3,cooldownBase:35e3,cooldownRate:-1e3,multiplierBase:1.575,multiplierRate:.125},6:{durationBase:1e4,durationRate:0,warmupBase:21e3,warmupRate:-1e3,cooldownBase:35e3,cooldownRate:-1e3,multiplierBase:1.575,multiplierRate:.125}}},window.Desperation3Skill=function(t,e){DesperationSkill.call(this,t,e)},Desperation3Skill.prototype=Object.create(DesperationSkill.prototype),Desperation3Skill.prototype.constructor=DesperationSkill,Desperation3Skill.prototype.getParamTable=function(){return{5:{durationBase:1e4,durationRate:0,warmupBase:27e3,warmupRate:-1e3,cooldownBase:35e3,cooldownRate:-1e3,multiplierBase:1.775,multiplierRate:.125},6:{durationBase:1e4,durationRate:0,warmupBase:21e3,warmupRate:-1e3,cooldownBase:35e3,cooldownRate:-1e3,multiplierBase:1.775,multiplierRate:.125}}},window.AssassinationSkill=function(t,e){EnforceStrengthSkill.call(this,t,e)},AssassinationSkill.prototype=Object.create(EnforceStrengthSkill.prototype),AssassinationSkill.prototype.constructor=EnforceStrengthSkill,window.Assassination1Skill=function(t,e){AssassinationSkill.call(this,t,e)},Assassination1Skill.prototype=Object.create(AssassinationSkill.prototype),Assassination1Skill.prototype.constructor=AssassinationSkill,Assassination1Skill.prototype.getParamTable=function(){return{4:{durationBase:15e3,durationRate:0,warmupBase:6e4,warmupRate:-1e3,cooldownBase:6e4,cooldownRate:-1e3,multiplierBase:1,multiplierRate:.1},5:{durationBase:15e3,durationRate:0,warmupBase:41e3,warmupRate:-1e3,cooldownBase:6e4,cooldownRate:-1e3,multiplierBase:1,multiplierRate:.1}}},window.Assassination2Skill=function(t,e){AssassinationSkill.call(this,t,e)},Assassination2Skill.prototype=Object.create(AssassinationSkill.prototype),Assassination2Skill.prototype.constructor=AssassinationSkill,Assassination2Skill.prototype.getParamTable=function(){return{5:{durationBase:2e4,durationRate:0,warmupBase:23e3,warmupRate:-1e3,cooldownBase:5e4,cooldownRate:-1e3,multiplierBase:1.1,multiplierRate:.125},6:{durationBase:2e4,durationRate:0,warmupBase:2e3,warmupRate:0,cooldownBase:5e4,cooldownRate:-1e3,multiplierBase:1.1,multiplierRate:.125}}},window.Assassination3Skill=function(t,e){AssassinationSkill.call(this,t,e)},Assassination3Skill.prototype=Object.create(AssassinationSkill.prototype),Assassination3Skill.prototype.constructor=AssassinationSkill,Assassination3Skill.prototype.getParamTable=function(){return{7:{durationBase:25e3,durationRate:0,warmupBase:2e3,warmupRate:0,cooldownBase:45e3,cooldownRate:-1e3,multiplierBase:1.15,multiplierRate:.15}}},window.AroundightSkill=function(t,e){EnforceStrengthSkill.call(this,t,e)},AroundightSkill.prototype=Object.create(EnforceStrengthSkill.prototype),AroundightSkill.prototype.constructor=EnforceStrengthSkill,AroundightSkill.prototype.getParamTable=function(){return{6:{durationBase:28750,durationRate:1250,warmupBase:45e3,warmupRate:1e3,cooldownBase:9e4,cooldownRate:-1e3,multiplierBase:1.5,multiplierRate:0}}},window.FragarachSkill=function(t,e){EnforceStrengthSkill.call(this,t,e)},FragarachSkill.prototype=Object.create(EnforceStrengthSkill.prototype),FragarachSkill.prototype.constructor=EnforceStrengthSkill,FragarachSkill.prototype.getParamTable=function(){return{7:{durationBase:28e3,durationRate:2e3,warmupBase:2e3,warmupRate:0,cooldownBase:9e4,cooldownRate:-1e3,multiplierBase:1,multiplierRate:.1}}},window.TyrfingSkill=function(t,e){EnforceStrengthSkill.call(this,t,e)},TyrfingSkill.prototype=Object.create(EnforceStrengthSkill.prototype),TyrfingSkill.prototype.constructor=EnforceStrengthSkill,TyrfingSkill.prototype.getParamTable=function(){return{6:{durationBase:8e3,durationRate:1e3,warmupBase:1e4,warmupRate:-1e3,cooldownBase:24e3,cooldownRate:-1e3,multiplierBase:1.05,multiplierRate:.05},7:{durationBase:8e3,durationRate:1e3,warmupBase:2e3,warmupRate:0,cooldownBase:8e4,cooldownRate:-1e3,multiplierBase:1.05,multiplierRate:.05}}},window.ExorcismFireSkill=function(t,e){EnforceStrengthSkill.call(this,t,e)},ExorcismFireSkill.prototype=Object.create(EnforceStrengthSkill.prototype),ExorcismFireSkill.prototype.constructor=EnforceStrengthSkill,ExorcismFireSkill.prototype.getParamTable=function(){return{6:{durationBase:15e3,durationRate:0,warmupBase:23e3,warmupRate:-1e3,cooldownBase:45e3,cooldownRate:-1e3,multiplierBase:1.175,multiplierRate:.125}}},window.HolySenseSkill=function(t,e){EnforceStrengthSkill.call(this,t,e)},HolySenseSkill.prototype=Object.create(EnforceStrengthSkill.prototype),HolySenseSkill.prototype.constructor=EnforceStrengthSkill,HolySenseSkill.prototype.getParamTable=function(){return{6:{durationBase:2500,durationRate:7500,warmupBase:16e3,warmupRate:-1e3,cooldownBase:3e4,cooldownRate:-1e3,multiplierBase:2,multiplierRate:0}}},window.MultipleShotSkill=function(t,e){Skill.call(this,t,e),this.delta=0},MultipleShotSkill.prototype=Object.create(Skill.prototype),MultipleShotSkill.prototype.constructor=Skill,MultipleShotSkill.prototype.execute=function(t){Skill.prototype.execute.call(this,t);var e=this.getDuration(),a=new MultipleAttackEffect(this.owner,t,e,this.delta);this.owner.addEffect(a,t)},MultipleShotSkill.prototype.getParamTable=function(){throw new Error("Not implemented")},window.DoubleShotSkill=function(t,e){MultipleShotSkill.call(this,t,e),this.delta=2},DoubleShotSkill.prototype=Object.create(MultipleShotSkill.prototype),DoubleShotSkill.prototype.constructor=MultipleShotSkill,DoubleShotSkill.prototype.getParamTable=function(){return{5:{durationBase:15e3,durationRate:0,warmupBase:34e3,warmupRate:-1e3,cooldownBase:5e4,cooldownRate:-1e3},6:{durationBase:15e3,durationRate:0,warmupBase:26e3,warmupRate:-1e3,cooldownBase:5e4,cooldownRate:-1e3}}},window.TripleShotSkill=function(t,e){MultipleShotSkill.call(this,t,e),this.delta=2},TripleShotSkill.prototype=Object.create(MultipleShotSkill.prototype),TripleShotSkill.prototype.constructor=MultipleShotSkill,TripleShotSkill.prototype.getParamTable=function(){return{6:{durationBase:15e3,durationRate:0,warmupBase:22e3,warmupRate:-1e3,cooldownBase:43e3,cooldownRate:-1e3},7:{durationBase:15e3,durationRate:0,warmupBase:2e3,warmupRate:0,cooldownBase:43e3,cooldownRate:-1e3}}},window.QuadroShotSkill=function(t,e){MultipleShotSkill.call(this,t,e),this.delta=3},QuadroShotSkill.prototype=Object.create(MultipleShotSkill.prototype),QuadroShotSkill.prototype.constructor=MultipleShotSkill,QuadroShotSkill.prototype.getParamTable=function(){return{7:{durationBase:15e3,durationRate:0,warmupBase:2e3,warmupRate:0,cooldownBase:4e4,cooldownRate:-1e3}}},window.QuickShotSkill=function(t,e,a){Skill.call(this,t,e,a)},QuickShotSkill.prototype=Object.create(Skill.prototype),QuickShotSkill.prototype.constructor=Skill,QuickShotSkill.prototype.execute=function(t){Skill.prototype.execute.call(this,t);var e=this.getDuration(),a=this.getMultiplier(),i=new EnforceStrengthEffect(this.owner,t,e,a);this.owner.addEffect(i,t);var o=this.getDelay();i=new AttackDelayEffect(this.owner,t,e,0,1-o),this.owner.addEffect(i,t)},QuickShotSkill.prototype.getDelay=function(){return this.param?this.param.delayBase+this.param.delayRate*this.level:1/0},window.BarrageShotSkill=function(t,e,a){Skill.call(this,t,e,a)},BarrageShotSkill.prototype=Object.create(Skill.prototype),BarrageShotSkill.prototype.constructor=Skill,BarrageShotSkill.prototype.execute=function(t){Skill.prototype.execute.call(this,t);var e=this.getDuration(),a=this.getMultiplier(),i=new EnforceStrengthEffect(this.owner,t,e,a);this.owner.addEffect(i,t);var o=this.getDelay();i=new AttackDelayEffect(this.owner,t,e,0,1-o),this.owner.addEffect(i,t)},BarrageShotSkill.prototype.getDelay=function(){return this.param?this.param.delayBase+this.param.delayRate*this.level:1/0},window.ModeChangeSkill=function(t,e,a){Skill.call(this,t,e,a)},ModeChangeSkill.prototype=Object.create(Skill.prototype),ModeChangeSkill.prototype.constructor=Skill,ModeChangeSkill.prototype.execute=function(t){Skill.prototype.execute.call(this,t);var e=this.getDuration(),a=this.getDelay();effect=new AttackDelayEffect(this.owner,t,e,0,a),this.owner.addEffect(effect,t)},ModeChangeSkill.prototype.getDelay=function(){return this.param?this.param.delayBase+this.param.delayRate*this.level:1/0},window.MagicBulletSkill=function(t,e){QuickShotSkill.call(this,t,e)},MagicBulletSkill.prototype=Object.create(QuickShotSkill.prototype),MagicBulletSkill.prototype.constructor=QuickShotSkill,window.MagicBullet1Skill=function(t,e){MagicBulletSkill.call(this,t,e)},MagicBullet1Skill.prototype=Object.create(MagicBulletSkill.prototype),MagicBullet1Skill.prototype.constructor=MagicBulletSkill,MagicBullet1Skill.prototype.getParamTable=function(){return{7:{durationBase:23750,durationRate:1250,warmupBase:2e3,warmupRate:0,cooldownBase:6e4,cooldownRate:-1,multiplierBase:1,multiplierRate:.1,delayBase:.5,delayRate:0}}},window.MagicBullet2Skill=function(t,e){MagicBulletSkill.call(this,t,e)},MagicBullet2Skill.prototype=Object.create(MagicBulletSkill.prototype),MagicBullet2Skill.prototype.constructor=MagicBulletSkill,MagicBullet2Skill.prototype.getParamTable=function(){return{7:{durationBase:23750,durationRate:1250,warmupBase:2e3,warmupRate:0,cooldownBase:6e4,cooldownRate:-1e3,multiplierBase:1.075,multiplierRate:.125,delayBase:.5,delayRate:0}}},window.ExcellentAllowSkill=function(t,e,a){EnforceStrengthSkill.call(this,t,e,a)},ExcellentAllowSkill.prototype=Object.create(EnforceStrengthSkill.prototype),ExcellentAllowSkill.prototype.constructor=EnforceStrengthSkill,window.EnforceHealingSkill=function(t,e,a){EnforceStrengthSkill.call(this,t,e,a)},EnforceHealingSkill.prototype=Object.create(EnforceStrengthSkill.prototype),EnforceHealingSkill.prototype.constructor=EnforceStrengthSkill,window.EnforceHealing1Skill=function(t,e){EnforceHealingSkill.call(this,t,e)},EnforceHealing1Skill.prototype=Object.create(EnforceHealingSkill.prototype),EnforceHealing1Skill.prototype.constructor=EnforceHealingSkill,EnforceHealing1Skill.prototype.getParamTable=function(){return{4:{durationBase:18750,durationRate:1250,warmupBase:5e4,warmupRate:-1e3,cooldownBase:5e4,cooldownRate:-1e3,multiplierBase:1,multiplierRate:.1},5:{durationBase:18750,durationRate:1250,warmupBase:34e3,warmupRate:-1e3,cooldownBase:5e4,cooldownRate:-1e3,multiplierBase:1,multiplierRate:.1}}},window.EnforceHealing2Skill=function(t,e){EnforceHealingSkill.call(this,t,e)},EnforceHealing2Skill.prototype=Object.create(EnforceHealingSkill.prototype),EnforceHealing2Skill.prototype.constructor=EnforceHealingSkill,EnforceHealing2Skill.prototype.getParamTable=function(){return{5:{durationBase:24e3,durationRate:1e3,warmupBase:3e4,warmupRate:-1e3,cooldownBase:45e3,cooldownRate:-1e3,multiplierBase:1.075,multiplierRate:.125},6:{durationBase:24e3,durationRate:1e3,warmupBase:24e3,warmupRate:-1e3,cooldownBase:45e3,cooldownRate:-1e3,multiplierBase:1.075,multiplierRate:.125}}},window.EnforceHealing3Skill=function(t,e){EnforceHealingSkill.call(this,t,e)},EnforceHealing3Skill.prototype=Object.create(EnforceHealingSkill.prototype),EnforceHealing3Skill.prototype.constructor=EnforceHealingSkill,EnforceHealing3Skill.prototype.getParamTable=function(){return{6:{durationBase:29e3,durationRate:1e3,warmupBase:21e3,warmupRate:-1e3,cooldownBase:4e4,cooldownRate:-1e3,multiplierBase:1.15,multiplierRate:.15}}},window.HealingPrayerSkill=function(t,e){EnforceHealingSkill.call(this,t,e)},HealingPrayerSkill.prototype=Object.create(EnforceHealingSkill.prototype),HealingPrayerSkill.prototype.constructor=EnforceHealingSkill,HealingPrayerSkill.prototype.getParamTable=function(){return{6:{durationBase:15e3,durationRate:0,warmupBase:13e3,warmupRate:-500,cooldownBase:25e3,cooldownRate:-1e3,multiplierBase:1.175,multiplierRate:.125}}},window.StarWandSkill=function(t,e){EnforceHealingSkill.call(this,t,e)},StarWandSkill.prototype=Object.create(EnforceHealingSkill.prototype),StarWandSkill.prototype.constructor=EnforceHealingSkill,StarWandSkill.prototype.getParamTable=function(){return{6:{durationBase:29e3,durationRate:1e3,warmupBase:21e3,warmupRate:-1e3,cooldownBase:4e4,cooldownRate:-1e3,multiplierBase:1.15,multiplierRate:.05}}},window.HealingMagicSkill=function(t,e,a){Skill.call(this,t,e,a)},HealingMagicSkill.prototype=Object.create(Skill.prototype),HealingMagicSkill.prototype.constructor=Skill,HealingMagicSkill.prototype.execute=function(t){Skill.prototype.execute.call(this,t);var e=this.getDuration(),a=new SwitchHealerEffect(this.owner,t,e);this.owner.addEffect(a,t);var i=this.getMultiplier();a=new EnforceStrengthEffect(this.owner,t,e,i),this.owner.addEffect(a,t)},window.Effect=function(t,e,a){this.name="?",this.owner=t,this.startTime=e,this.duration=a,this.priority=0,this.expired=!1,this.callbacks={}},Effect.prototype=Object.create(Object.prototype,{}),Effect.prototype.constructor=Object,Effect.prototype.dispatch=function(){var t=Array.prototype.slice.call(arguments),e=t.shift(),a=this.callbacks[e];a&&a.apply(this,t)},Effect.prototype.update=function(t){(this.expired||t-this.startTime>this.duration)&&this.expire(t)},Effect.prototype.expire=function(t){this.expired=!0,this.dispatch("expire")},Effect.prototype.dump=function(){return"?"},window.MoraleEffect=function(t,e,a,i){Effect.call(this,t,e,a),this.name="士気高揚",this.rate=i},MoraleEffect.prototype=Object.create(Effect.prototype,{}),MoraleEffect.prototype.constructor=Effect,MoraleEffect.prototype.update=function(t){Effect.prototype.update.call(this,t),this.expired||(this.owner.status.strength*=this.rate,this.owner.status.defence*=this.rate)},MoraleEffect.prototype.dump=function(){var e=Math.floor(100*this.rate)+"%";return" 攻撃力補正:"+e+" 防御力補正:"+e+" 効果時間:"+t(this.duration)},window.EnforceStrengthEffect=function(t,e,a,i){Effect.call(this,t,e,a),this.name="攻撃力強化",this.multiplier=i},EnforceStrengthEffect.prototype=Object.create(Effect.prototype,{}),EnforceStrengthEffect.prototype.constructor=Effect,EnforceStrengthEffect.prototype.update=function(t){Effect.prototype.update.call(this,t),this.expired||(this.owner.status.strength*=this.multiplier)},EnforceStrengthEffect.prototype.dump=function(){return"攻撃力補正:"+(100*this.multiplier).toFixed(1)+"% 効果時間:"+t(this.duration)},window.EnforceHealthEffect=function(t,e,a,i){Effect.call(this,t,e,a),this.name="最大HP強化",this.multiplier=i},EnforceHealthEffect.prototype=Object.create(Effect.prototype,{}),EnforceHealthEffect.prototype.constructor=Effect,EnforceHealthEffect.prototype.update=function(t){Effect.prototype.update.call(this,t),this.expired||(this.owner.status.health*=this.multiplier)},EnforceHealthEffect.prototype.dump=function(){return"最大HP補正:"+(100*this.multiplier).toFixed(1)+"% 効果時間:"+t(this.duration)},window.EnforceDefenceEffect=function(t,e,a,i){Effect.call(this,t,e,a),this.name="防御力強化",this.multiplier=i},EnforceDefenceEffect.prototype=Object.create(Effect.prototype,{}),EnforceDefenceEffect.prototype.constructor=Effect,EnforceDefenceEffect.prototype.update=function(t){Effect.prototype.update.call(this,t),this.expired||(this.owner.status.defence*=this.multiplier)},EnforceDefenceEffect.prototype.dump=function(){return"防御力補正:"+(100*this.multiplier).toFixed(1)+"% 効果時間:"+t(this.duration)},window.AttackDelayEffect=function(t,e,a,i,o){Effect.call(this,t,e,a),this.name="攻撃速度変化",this.warmupDelay=i||1,this.cooldownDelay=o||1},AttackDelayEffect.prototype=Object.create(Effect.prototype,{}),AttackDelayEffect.prototype.constructor=Effect,AttackDelayEffect.prototype.update=function(t){Effect.prototype.update.call(this,t),this.expired||(this.owner.status.attackWarmupDelay*=this.warmupDelay,this.owner.status.attackCooldownDelay*=this.cooldownDelay)},AttackDelayEffect.prototype.dump=function(){return"攻撃ディレイ補正:"+100*this.cooldownDelay+"% 効果時間:"+t(this.duration)},window.MultipleAttackEffect=function(t,e,a,i){Effect.call(this,t,e,a),this.name="攻撃回数変化",this.delta=i},MultipleAttackEffect.prototype=Object.create(Effect.prototype,{}),MultipleAttackEffect.prototype.constructor=Effect,MultipleAttackEffect.prototype.update=function(t){Effect.prototype.update.call(this,t),this.expired||(this.owner.status.attackTimes+=this.delta)},MultipleAttackEffect.prototype.dump=function(){return"攻撃回数:"+(this.delta>0?"+":"")+this.delta+"回 効果時間:"+t(this.duration)},window.SelfHealingSkill=function(t,e){Skill.call(this,t,e)},SelfHealingSkill.prototype=Object.create(Skill.prototype),SelfHealingSkill.prototype.constructor=Skill,SelfHealingSkill.prototype.execute=function(t){Skill.prototype.execute.call(this,t);var e=this.getMultiplier(),a=new SelfHealingEffect(this.owner,t,1/0,e);this.owner.addEffect(a,t)},SelfHealingSkill.prototype.getParamTable=function(){throw new Error("Not implemented")},window.SelfHealing1Skill=function(t,e){SelfHealingSkill.call(this,t,e)},SelfHealing1Skill.prototype=Object.create(SelfHealingSkill.prototype),SelfHealing1Skill.prototype.constructor=SelfHealingSkill,SelfHealing1Skill.prototype.getParamTable=function(){return{4:{durationBase:0,durationRate:0,warmupBase:4e4,warmupRate:-1e3,cooldownBase:4e4,cooldownRate:-1e3,multiplierBase:.2,multiplierRate:.01}}},window.SelfHealing2Skill=function(t,e){SelfHealingSkill.call(this,t,e)},SelfHealing2Skill.prototype=Object.create(SelfHealingSkill.prototype),SelfHealing2Skill.prototype.constructor=SelfHealingSkill,SelfHealing2Skill.prototype.getParamTable=function(){return{5:{durationBase:0,durationRate:0,warmupBase:31e3,warmupRate:-1e3,cooldownBase:4e4,cooldownRate:-1e3,multiplierBase:.3,multiplierRate:.01}}},window.SelfHealing3Skill=function(t,e){SelfHealingSkill.call(this,t,e)},SelfHealing3Skill.prototype=Object.create(SelfHealingSkill.prototype),SelfHealing3Skill.prototype.constructor=SelfHealingSkill,SelfHealing3Skill.prototype.getParamTable=function(){return{5:{durationBase:0,durationRate:0,warmupBase:3e4,warmupRate:-1e3,cooldownBase:5e4,cooldownRate:-1e3,multiplierBase:.4,multiplierRate:.01},6:{durationBase:0,durationRate:0,warmupBase:3e4,warmupRate:0,cooldownBase:5e4,cooldownRate:-1e3,multiplierBase:.4,multiplierRate:.01}}},window.SelfHealing4Skill=function(t,e){SelfHealingSkill.call(this,t,e)},SelfHealing4Skill.prototype=Object.create(SelfHealingSkill.prototype),SelfHealing4Skill.prototype.constructor=SelfHealingSkill,SelfHealing4Skill.prototype.getParamTable=function(){return{7:{durationBase:0,durationRate:0,warmupBase:2e3,warmupRate:0,cooldownBase:55e3,cooldownRate:-1e3,multiplierBase:.5,multiplierRate:.01}}},window.SelfHealingEffect=function(t,e,a,i){Effect.call(this,t,e,a),this.name="自己回復",this.multiplier=i},SelfHealingEffect.prototype=Object.create(Effect.prototype,{}),SelfHealingEffect.prototype.constructor=Effect,SelfHealingEffect.prototype.update=function(t){Effect.prototype.update.call(this,t),this.expired||(this.owner.recover(this.calcRecovery(),this,t),this.expired=!0)},SelfHealingEffect.prototype.dump=function(){return"回復量:"+this.calcRecovery()+" 対象最大HP:"+this.owner.status.health+" 回復率:"+(100*this.multiplier).toFixed(1)+"%"},SelfHealingEffect.prototype.calcRecovery=function(){return Math.floor(this.owner.status.health*this.multiplier)},window.HealingPrayerSkill=function(t,e){Skill.call(this,t,e)},HealingPrayerSkill.prototype=Object.create(Skill.prototype),HealingPrayerSkill.prototype.constructor=Skill,HealingPrayerSkill.prototype.execute=function(t){Skill.prototype.execute.call(this,t);var e=this.getDuration(),a=new SwitchHealerEffect(this.owner,t,e);this.owner.addEffect(a,t);var i=this.getMultiplier();a=new EnforceStrengthEffect(this.owner,t,e,i),this.owner.addEffect(a,t)},HealingPrayerSkill.prototype.getParamTable=function(){return{6:{durationBase:15e3,durationRate:0,warmupBase:13e3,warmupRate:-500,cooldownBase:25e3,cooldownRate:-1e3,multiplierBase:1.175,multiplierRate:.125}}},window.SwitchAttackerEffect=function(t,e,a){Effect.call(this,t,e,a),this.name="攻撃モード";var i=this.owner.actions.attack,o=this.owner.actions.heal;i.baseTime=o.baseTime,i.state=o.state},SwitchAttackerEffect.prototype=Object.create(Effect.prototype,{}),SwitchAttackerEffect.prototype.constructor=Effect,SwitchAttackerEffect.prototype.update=function(t){if(Effect.prototype.update.call(this,t),this.expired){var e=this.owner.actions.attack,a=this.owner.actions.heal;return a.baseTime=e.baseTime,void(a.state=e.state)}this.owner.status.attackEnabled=!0,this.owner.status.healEnabled=!1},SwitchAttackerEffect.prototype.dump=function(){return"効果時間:"+t(this.duration)},window.SwitchHealerEffect=function(t,e,a){Effect.call(this,t,e,a),this.name="回復モード";var i=this.owner.actions.attack,o=this.owner.actions.heal;o.baseTime=i.baseTime,o.state=i.state},SwitchHealerEffect.prototype=Object.create(Effect.prototype,{}),SwitchHealerEffect.prototype.constructor=Effect,SwitchHealerEffect.prototype.update=function(t){if(Effect.prototype.update.call(this,t),this.expired){var e=this.owner.actions.attack,a=this.owner.actions.heal;return e.baseTime=a.baseTime,void(e.state=a.state)}this.owner.status.attackEnabled=!1,this.owner.status.healEnabled=!0},SwitchHealerEffect.prototype.dump=function(){return"効果時間:"+t(this.duration)},window.MagicalSwordSkill=function(t,e,a){Skill.call(this,t,e,a)},MagicalSwordSkill.prototype=Object.create(Skill.prototype),MagicalSwordSkill.prototype.constructor=Skill,MagicalSwordSkill.prototype.execute=function(t){Skill.prototype.execute.call(this,t);var e=this.getDuration(),a=this.getMultiplier(),i=new EnforceStrengthEffect(this.owner,t,e,a);this.owner.addEffect(i,t),i=new EnchantAttributionEffect(this.owner,t,e,1),this.owner.addEffect(i,t)},window.SwordEnhanceSkill=function(t,e,a){Skill.call(this,t,e,a)},SwordEnhanceSkill.prototype=Object.create(Skill.prototype),SwordEnhanceSkill.prototype.constructor=Skill,SwordEnhanceSkill.prototype.execute=function(t){Skill.prototype.execute.call(this,t);var e=this.getDuration(),a=this.getMultiplier(),i=new EnforceStrengthEffect(this.owner,t,e,a);this.owner.addEffect(i,t),i=new EnchantAttributionEffect(this.owner,t,e,1),this.owner.addEffect(i,t)},window.EnchantAttributionEffect=function(t,e,a,i){Effect.call(this,t,e,a),this.name="属性付与",this.attribution=i},EnchantAttributionEffect.prototype=Object.create(Effect.prototype,{}),EnchantAttributionEffect.prototype.constructor=Effect,EnchantAttributionEffect.prototype.update=function(t){Effect.prototype.update.call(this,t),this.expired||(this.owner.status.attackAttribution=this.attribution)},EnchantAttributionEffect.prototype.dump=function(){var e="準魔法";return"効果時間:"+t(this.duration)+" 属性:"+e},window.ExorcismFireSkill=function(t,e){Skill.call(this,t,e)},ExorcismFireSkill.prototype=Object.create(Skill.prototype),ExorcismFireSkill.prototype.constructor=Skill,ExorcismFireSkill.prototype.execute=function(t){Skill.prototype.execute.call(this,t);var e=this.getDuration(),a=new SwitchAttackerEffect(this.owner,t,e);this.owner.addEffect(a,t);var i=this.getMultiplier();a=new EnforceStrengthEffect(this.owner,t,e,i),
this.owner.addEffect(a,t)},ExorcismFireSkill.prototype.getParamTable=function(){return{6:{durationBase:15e3,durationRate:0,warmupBase:23e3,warmupRate:-500,cooldownBase:45e3,cooldownRate:-1e3,multiplierBase:1.175,multiplierRate:.125}}},window.MuramasaSkill=function(t,e){Skill.call(this,t,e)},MuramasaSkill.prototype=Object.create(Skill.prototype),MuramasaSkill.prototype.constructor=Skill,MuramasaSkill.prototype.execute=function(t){Skill.prototype.execute.call(this,t);var e=this.getDuration(),a=this.getMultiplier(),i=new DrainEffect(this.owner,t,e,a);this.owner.addEffect(i,t)},MuramasaSkill.prototype.getParamTable=function(){return{6:{durationBase:1e4,durationRate:0,warmupBase:16e3,warmupRate:-500,cooldownBase:25e3,cooldownRate:-1e3,multiplierBase:0,multiplierRate:.03}}},window.DrainEffect=function(t,e,a,i){Effect.call(this,t,e,a),this.name="攻撃時回復",this.multiplier=i;var o=this;this.owner.actions.attack.callbacks.execute=function(t){o.owner.recover(o.calcRecovery(),o.owner,t)}},DrainEffect.prototype=Object.create(Effect.prototype,{}),DrainEffect.prototype.constructor=Effect,DrainEffect.prototype.update=function(t){Effect.prototype.update.call(this,t),this.expired&&delete this.owner.actions.attack.callbacks.execute},DrainEffect.prototype.dump=function(){return"回復量:"+this.calcRecovery()+" 対象最大HP:"+this.owner.status.health+" 回復率:"+(100*this.multiplier).toFixed(1)+"%"},DrainEffect.prototype.calcRecovery=function(){return Math.floor(this.owner.status.health*this.multiplier)},window.FlameFormationSkill=function(t,e){EnforceStrengthSkill.call(this,t,e)},FlameFormationSkill.prototype=Object.create(EnforceStrengthSkill.prototype),FlameFormationSkill.prototype.constructor=EnforceStrengthSkill,FlameFormationSkill.prototype.getParamTable=function(){return{6:{durationBase:8750,durationRate:1250,warmupBase:45e3,warmupRate:0,cooldownBase:9e4,cooldownRate:0,multiplierBase:1.075,multiplierRate:.025}}},window.RushSkill=function(t,e){Skill.call(this,t,e)},RushSkill.prototype=Object.create(Skill.prototype),RushSkill.prototype.constructor=Skill,RushSkill.prototype.execute=function(t){Skill.prototype.execute.call(this,t);var e=this.getDuration(),a=this.getDelay(),i=new AttackDelayEffect(this.owner,t,e,0,1-a);this.owner.addEffect(i,t)},RushSkill.prototype.getDelay=function(){return this.param?this.param.delayBase+this.param.delayRate*this.level:1/0},RushSkill.prototype.getParamTable=function(){return{5:{durationBase:7500,durationRate:2500,warmupBase:24e3,warmupRate:-1e3,cooldownBase:35e3,cooldownRate:-1e3,delayBase:.5,delayRate:0}}},window.IfritSkill=function(t,e){Skill.call(this,t,e)},IfritSkill.prototype=Object.create(Skill.prototype),IfritSkill.prototype.constructor=Skill,IfritSkill.prototype.execute=function(t){Skill.prototype.execute.call(this,t);var e=this.getDuration(),a=new EnableAttackEffect(this.owner,t,e);this.owner.addEffect(a,t)},IfritSkill.prototype.getParamTable=function(){return{6:{durationBase:5e3,durationRate:5e3,warmupBase:12400,warmupRate:-400,cooldownBase:26e3,cooldownRate:-1e3}}},window.BreakSealSkill=function(t,e,a){Skill.call(this,t,e,a)},BreakSealSkill.prototype=Object.create(Skill.prototype),BreakSealSkill.prototype.constructor=Skill,BreakSealSkill.prototype.execute=function(t){Skill.prototype.execute.call(this,t);var e=this.getDuration(),a=new EnableAttackEffect(this.owner,t,e);this.owner.addEffect(a,t)},window.EnableAttackEffect=function(t,e,a){Effect.call(this,t,e,a),this.name="攻撃有効化"},EnableAttackEffect.prototype=Object.create(Effect.prototype,{}),EnableAttackEffect.prototype.constructor=Effect,EnableAttackEffect.prototype.update=function(t){Effect.prototype.update.call(this,t),this.expired||(this.owner.status.attackEnabled=!0)},EnableAttackEffect.prototype.dump=function(){return"効果時間:"+t(this.duration)},window.MagicEnhanceSkill=function(t,e){EnforceStrengthSkill.call(this,t,e)},MagicEnhanceSkill.prototype=Object.create(EnforceStrengthSkill.prototype),MagicEnhanceSkill.prototype.constructor=EnforceStrengthSkill,MagicEnhanceSkill.prototype.getParamTable=function(){return{4:{durationBase:35e3,durationRate:5e3,warmupBase:65e3,warmupRate:-1e3,cooldownBase:65e3,cooldownRate:-1e3,multiplierBase:1.04,multiplierRate:.06}}},window.CursedBloodSkill=function(t,e){EnforceStrengthSkill.call(this,t,e)},CursedBloodSkill.prototype=Object.create(EnforceStrengthSkill.prototype),CursedBloodSkill.prototype.constructor=EnforceStrengthSkill,CursedBloodSkill.prototype.getParamTable=function(){return{6:{durationBase:13340,durationRate:1660,warmupBase:40500,warmupRate:-500,cooldownBase:8e4,cooldownRate:-1e3,multiplierBase:1.165,multiplierRate:.035}}},window.Ability=function(t){this.name="?",this.owner=t,this.callbacks={}},Ability.prototype=Object.create(Object.prototype),Ability.prototype.constructor=Object,Ability.prototype.dispatch=function(){var t=Array.prototype.slice.call(arguments),e=t.shift(),a=this.callbacks[e];a&&a.apply(this,t)},Ability.prototype.update=function(){},Ability.prototype.start=function(t){this.dispatch("started",this,t)},window.NullAbility=function(t){Ability.call(this,t)},NullAbility.prototype=Object.create(Ability.prototype),NullAbility.prototype.constructor=Ability,NullAbility.prototype.start=function(t){},window.PrinceAbility=function(t){Ability.call(this,t)},PrinceAbility.prototype=Object.create(Ability.prototype),PrinceAbility.prototype.constructor=Ability,PrinceAbility.prototype.start=function(t){this.__proto__.__proto__.start.call(this,t);var e=this.owner.stage,a=e.condition.princeTitle,i=new TitleEffect(this.owner,t,1/0,a);this.owner.addEffect(i,t)},PrinceAbility.prototype.update=function(t){this.__proto__.__proto__.update.call(this,t);var e=this.owner.stage,a=this.calcMorale();e.status.morale+=a},PrinceAbility.prototype.calcMorale=function(){var t=this.owner.stage.condition,e=t.princeTitle.morale,a=t.rank;return e+Math.ceil(a/10+Math.floor(a/100)+1)/100+1},window.TitleEffect=function(t,e,a,i){Effect.call(this,t,e,a),this.name="称号効果",this.title=i},TitleEffect.prototype=Object.create(Effect.prototype,{}),TitleEffect.prototype.constructor=Effect,TitleEffect.prototype.update=function(t){Effect.prototype.update.call(this,t),this.expired||(this.owner.status.health*=1+this.title.health,this.owner.status.strength*=1+this.title.strength,this.owner.status.defence*=1+this.title.defence)},TitleEffect.prototype.dump=function(){return" HP補正:"+(Math.floor(100*this.title.health)+100)+"% 攻撃力補正:"+(Math.floor(100*this.title.strength)+100)+"% 防御力補正:"+(Math.floor(100*this.title.defence)+100)+"% 士気値補正:"+(Math.floor(100*this.title.morale)+100)+"% 効果時間:"+t(this.duration)},window.PowerAttackAbility=function(t){Ability.call(this,t)},PowerAttackAbility.prototype=Object.create(Ability.prototype),PowerAttackAbility.prototype.constructor=Ability,PowerAttackAbility.prototype.start=function(t){this.__proto__.__proto__.start.call(this,t);var e=this.parameters.strength,a=new EnforceStrengthEffect(this.owner,t,1/0,e);this.owner.addEffect(a,t);var i=this.parameters.cooldownTime;a=new AttackDelayEffect(this.owner,t,1/0,1,i),this.owner.addEffect(a,t)},window.HealthBoostAbility=function(t){Ability.call(this,t)},HealthBoostAbility.prototype=Object.create(Ability.prototype),HealthBoostAbility.prototype.constructor=Ability,HealthBoostAbility.prototype.start=function(t){this.__proto__.__proto__.start.call(this,t);var e=this.parameters.health,a=new EnforceHealthEffect(this.owner,t,1/0,e);this.owner.addEffect(a,t)},window.TeamHealthBoostAbility=function(t){Ability.call(this,t)},TeamHealthBoostAbility.prototype=Object.create(Ability.prototype),TeamHealthBoostAbility.prototype.constructor=Ability,TeamHealthBoostAbility.prototype.start=function(t){this.__proto__.__proto__.start.call(this,t);var e=this.parameters.health,a=this.owner,i=this.owner.stage,o=i.condition.abilityToAll;i.units.forEach(function(i){if(1==i.group&&(o||i==a)){var n=new EnforceHealthEffect(i,t,1/0,e);i.addEffect(n,t)}})},window.QuickAttackAbility=function(t){Ability.call(this,t)},QuickAttackAbility.prototype=Object.create(Ability.prototype),QuickAttackAbility.prototype.constructor=Ability,QuickAttackAbility.prototype.start=function(t){this.__proto__.__proto__.start.call(this,t);var e=0,a=this.parameters.cooldownTime,i=new AttackDelayEffect(this.owner,t,1/0,e,a);this.owner.addEffect(i,t)},window.IaiAbility=function(t){Ability.call(this,t)},IaiAbility.prototype=Object.create(Ability.prototype),IaiAbility.prototype.constructor=Ability,IaiAbility.prototype.start=function(t){this.__proto__.__proto__.start.call(this,t);var e=0,a=this.parameters.cooldownTime,i=new AttackDelayEffect(this.owner,t,1/0,e,a);this.owner.addEffect(i,t)},window.QuickChantAbility=function(t){Ability.call(this,t)},QuickChantAbility.prototype=Object.create(Ability.prototype),QuickChantAbility.prototype.constructor=Ability,QuickChantAbility.prototype.start=function(t){this.__proto__.__proto__.start.call(this,t);var e=0,a=this.parameters.cooldownTime,i=new AttackDelayEffect(this.owner,t,1/0,e,a);this.owner.addEffect(i,t)},window.QuickDrawAbility=function(t){Ability.call(this,t)},QuickDrawAbility.prototype=Object.create(Ability.prototype),QuickDrawAbility.prototype.constructor=Ability,QuickDrawAbility.prototype.start=function(t){this.__proto__.__proto__.start.call(this,t);var e=0,a=this.parameters.cooldownTime,i=new AttackDelayEffect(this.owner,t,1/0,e,a);this.owner.addEffect(i,t)},window.TeamStrengthBoostAbility=function(t){Ability.call(this,t)},TeamStrengthBoostAbility.prototype=Object.create(Ability.prototype),TeamStrengthBoostAbility.prototype.constructor=Ability,TeamStrengthBoostAbility.prototype.start=function(t){this.__proto__.__proto__.start.call(this,t);var e=this.parameters.strength,a=this.owner,i=this.owner.stage,o=i.condition.abilityToAll;i.units.forEach(function(i){if(1==i.group&&(o||i==a)){var n=new EnforceStrengthEffect(i,t,1/0,e);i.addEffect(n,t)}})},window.TeamDefenceBoostAbility=function(t){Ability.call(this,t)},TeamDefenceBoostAbility.prototype=Object.create(Ability.prototype),TeamDefenceBoostAbility.prototype.constructor=Ability,TeamDefenceBoostAbility.prototype.start=function(t){this.__proto__.__proto__.start.call(this,t);var e=this.parameters.defence,a=this.owner,i=this.owner.stage,o=i.condition.abilityToAll;i.units.forEach(function(i){if(1==i.group&&(o||i==a)){var n=new EnforceDefenceEffect(i,t,1/0,e);i.addEffect(n,t)}})},window.ClassifiedStrengthBoostAbility=function(t){Ability.call(this,t)},ClassifiedStrengthBoostAbility.prototype=Object.create(Ability.prototype),ClassifiedStrengthBoostAbility.prototype.constructor=Ability,ClassifiedStrengthBoostAbility.prototype.start=function(t){this.__proto__.__proto__.start.call(this,t);var e=this.parameters.strength,a=this.parameters.classes,i=this.owner,o=this.owner.stage,n=o.condition.abilityToAll;o.units.forEach(function(o){var r=o.group&&(n||o==i),l=a.some(function(t){return o["class"]&&t==o["class"].id});if(r&&l){var c=new EnforceStrengthEffect(o,t,1/0,e);o.addEffect(c,t)}})},window.ClassifiedDefenceBoostAbility=function(t){Ability.call(this,t)},ClassifiedDefenceBoostAbility.prototype=Object.create(Ability.prototype),ClassifiedDefenceBoostAbility.prototype.constructor=Ability,ClassifiedDefenceBoostAbility.prototype.start=function(t){this.__proto__.__proto__.start.call(this,t);var e=this.parameters.defence,a=this.parameters.classes,i=this.owner,o=this.owner.stage,n=o.condition.abilityToAll;o.units.forEach(function(o){var r=o.group&&(n||o==i),l=a.some(function(t){return o["class"]&&t==o["class"].id});if(r&&l){var c=new EnforceDefenceEffect(o,t,1/0,e);o.addEffect(c,t)}})},window.SnipeAbility=function(t){Ability.call(this,t)},SnipeAbility.prototype=Object.create(Ability.prototype),SnipeAbility.prototype.constructor=Ability,SnipeAbility.prototype.start=function(t){this.__proto__.__proto__.start.call(this,t);var e=0,a=this.parameters.cooldownTime,i=new AttackDelayEffect(this.owner,t,1/0,e,a);this.owner.addEffect(i,t)},window.WhiteMagicAbility=function(t){Ability.call(this,t)},WhiteMagicAbility.prototype=Object.create(Ability.prototype),WhiteMagicAbility.prototype.constructor=Ability,WhiteMagicAbility.prototype.start=function(t){this.__proto__.__proto__.start.call(this,t);var e=0,a=this.parameters.cooldownTime,i=new AttackDelayEffect(this.owner,t,1/0,e,a);this.owner.addEffect(i,t)},window.BlackMagicAbility=function(t){Ability.call(this,t)},BlackMagicAbility.prototype=Object.create(Ability.prototype),BlackMagicAbility.prototype.constructor=Ability,BlackMagicAbility.prototype.start=function(t){this.__proto__.__proto__.start.call(this,t);var e=0,a=this.parameters.cooldownTime,i=new AttackDelayEffect(this.owner,t,1/0,e,a);this.owner.addEffect(i,t)},window.QuickHealingPrayerSkill=function(t,e,a){Skill.call(this,t,e,a)},QuickHealingPrayerSkill.prototype=Object.create(Skill.prototype),QuickHealingPrayerSkill.prototype.constructor=Skill,QuickHealingPrayerSkill.prototype.execute=function(t){Skill.prototype.execute.call(this,t);var e=this.getDuration(),a=new SwitchHealerEffect(this.owner,t,e);this.owner.addEffect(a,t);var i=this.getAttackCooldownCorrection();a=new AttackDelayEffect(this.owner,t,e,1,i),this.owner.addEffect(a,t)},QuickHealingPrayerSkill.prototype.getAttackCooldownCorrection=function(){return this.param.attackCooldownBase+this.param.attackCooldownRate*(this.level-1)},window.RecoveryCostSkill=function(t,e,a){Skill.call(this,t,e,a)},RecoveryCostSkill.prototype=Object.create(Skill.prototype),RecoveryCostSkill.prototype.constructor=Skill,RecoveryCostSkill.prototype.execute=function(t){Skill.prototype.execute.call(this,t);var e=new RecoveryCostEffect(this.owner,t,0,this.param.point);this.owner.addEffect(e,t)},window.RecoveryCostEffect=function(t,e,a,i){Effect.call(this,t,e,a),this.name="出撃コスト回復",this.point=i},RecoveryCostEffect.prototype=Object.create(Effect.prototype,{}),RecoveryCostEffect.prototype.constructor=Effect,RecoveryCostEffect.prototype.update=function(t){Effect.prototype.update.call(this,t),this.expired||(this.owner.stage.addCost(this.point,this.owner,t),this.expired=!0)},RecoveryCostEffect.prototype.dump=function(){return"コスト回復量:"+this.point},window.DestroyedCostBonusEffect=function(t,e,a,i){Effect.call(this,t,e,a),this.name="撃破時コスト回復",this.point=i,t.callbacks.destroyed=function(e,a){this.stage.addCost(i,t,a)}},DestroyedCostBonusEffect.prototype=Object.create(Effect.prototype,{}),DestroyedCostBonusEffect.prototype.constructor=Effect,DestroyedCostBonusEffect.prototype.dump=function(){return"コスト回復量:"+this.point},window.Database=function(t){this.url=t},Database.prototype=Object.create(Object.prototype),Database.prototype.constructor=Object,Database.prototype.buildQueryUrl=function(t){return this.url+"?sheet="+encodeURIComponent(t)},Database.prototype.query=function(t,e,a){var i=this.buildQueryUrl(t),o=new google.visualization.Query(i);o.send(function(t){var i;try{i=Database.handleQueryResponse(t)}catch(o){a(o)}e(i)})},Database.handleQueryResponse=function(t){if(t.isError())throw new Error(t.getMessage()+" "+t.getDetailedMessage());for(var e=t.getDataTable(),a=[],i=0;i<e.getNumberOfColumns();i++)a[i]=e.getColumnLabel(i);var o=a[0],n={};for(i=0;i<e.getNumberOfRows();i++){for(var r={},l=0;l<a.length;l++)r[a[l]]=e.getValue(i,l);var c=r[o];c&&(n[c]=r)}return n}}).call(window)},541:function(t,e){"use strict";function a(t,e){return e=void 0===e?2:e,t=t===1/0||t===-(1/0)?"∞":(t/1e3).toFixed(e),t+"秒"}t.exports=a}});